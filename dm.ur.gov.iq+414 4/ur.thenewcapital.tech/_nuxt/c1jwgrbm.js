import{A,c as q,w as W,i as I,a as b,o as d,u as $,P as T,b as w,d as K}from"./DytFh8Ie.js";import{d as B,ak as N,r as p,m as y,s as g,ab as M,a0 as k,F as R,C as D}from"./bfq3BMMB.js";function O(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}var H=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(H||{});let S=B({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:n}){return()=>{var o;let{features:a,...u}=e,r={"aria-hidden":(a&2)===2?!0:(o=u["aria-hidden"])!=null?o:void 0,hidden:(a&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(a&4)===4&&(a&2)!==2&&{display:"none"}}};return A({ourProps:r,theirProps:u,slot:{},attrs:n,slots:t,name:"Hidden"})}}});function z(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let F=[];z(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&F[0]!==t.target&&(F.unshift(t.target),F=F.filter(n=>n!=null&&n.isConnected),F.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function G(e,t,n,o){q.isServer||N(a=>{e=e??window,e.addEventListener(t,n,o),a(()=>e.removeEventListener(t,n,o))})}var L=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(L||{});function J(){let e=p(0);return W("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function P(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let o=d(n);o instanceof HTMLElement&&t.add(o)}return t}var C=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(C||{});let te=Object.assign(B({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:p(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){let a=p(null);o({el:a,$el:a});let u=y(()=>I(a)),r=p(!1);g(()=>r.value=!0),M(()=>r.value=!1),U({ownerDocument:u},y(()=>r.value&&!!(e.features&16)));let m=V({ownerDocument:u,container:a,initialFocus:y(()=>e.initialFocus)},y(()=>r.value&&!!(e.features&2)));X({ownerDocument:u,container:a,containers:e.containers,previousActiveElement:m},y(()=>r.value&&!!(e.features&8)));let l=J();function i(s){let f=d(a);f&&(v=>v())(()=>{$(l.value,{[L.Forwards]:()=>{T(f,w.First,{skipElements:[s.relatedTarget]})},[L.Backwards]:()=>{T(f,w.Last,{skipElements:[s.relatedTarget]})}})})}let c=p(!1);function h(s){s.key==="Tab"&&(c.value=!0,requestAnimationFrame(()=>{c.value=!1}))}function E(s){if(!r.value)return;let f=P(e.containers);d(a)instanceof HTMLElement&&f.add(d(a));let v=s.relatedTarget;v instanceof HTMLElement&&v.dataset.headlessuiFocusGuard!=="true"&&(j(f,v)||(c.value?T(d(a),$(l.value,{[L.Forwards]:()=>w.Next,[L.Backwards]:()=>w.Previous})|w.WrapAround,{relativeTo:s.target}):s.target instanceof HTMLElement&&b(s.target)))}return()=>{let s={},f={ref:a,onKeydown:h,onFocusout:E},{features:v,initialFocus:Y,containers:Z,...x}=e;return k(R,[!!(v&4)&&k(S,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:i,features:H.Focusable}),A({ourProps:f,theirProps:{...t,...x},slot:s,attrs:t,slots:n,name:"FocusTrap"}),!!(v&4)&&k(S,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:i,features:H.Focusable})])}}}),{features:C});function Q(e){let t=p(F.slice());return D([e],([n],[o])=>{o===!0&&n===!1?O(()=>{t.value.splice(0)}):o===!1&&n===!0&&(t.value=F.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(o=>o!=null&&o.isConnected))!=null?n:null}}function U({ownerDocument:e},t){let n=Q(t);g(()=>{N(()=>{var o,a;t.value||((o=e.value)==null?void 0:o.activeElement)===((a=e.value)==null?void 0:a.body)&&b(n())},{flush:"post"})}),M(()=>{t.value&&b(n())})}function V({ownerDocument:e,container:t,initialFocus:n},o){let a=p(null),u=p(!1);return g(()=>u.value=!0),M(()=>u.value=!1),g(()=>{D([t,n,o],(r,m)=>{if(r.every((i,c)=>(m==null?void 0:m[c])===i)||!o.value)return;let l=d(t);l&&O(()=>{var i,c;if(!u.value)return;let h=d(n),E=(i=e.value)==null?void 0:i.activeElement;if(h){if(h===E){a.value=E;return}}else if(l.contains(E)){a.value=E;return}h?b(h):T(l,w.First|w.NoScroll)===K.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.value=(c=e.value)==null?void 0:c.activeElement})},{immediate:!0,flush:"post"})}),a}function X({ownerDocument:e,container:t,containers:n,previousActiveElement:o},a){var u;G((u=e.value)==null?void 0:u.defaultView,"focus",r=>{if(!a.value)return;let m=P(n);d(t)instanceof HTMLElement&&m.add(d(t));let l=o.value;if(!l)return;let i=r.target;i&&i instanceof HTMLElement?j(m,i)?(o.value=i,b(i)):(r.preventDefault(),r.stopPropagation(),b(l)):b(o.value)},!0)}function j(e,t){for(let n of e)if(n.contains(t))return!0;return!1}export{G as E,te as a,S as f,O as t,H as u};
