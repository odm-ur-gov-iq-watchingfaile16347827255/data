(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-832be704"],{"2b17":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-auth"},[t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"redirect"},[e.token?t("h2",{staticClass:"text-center"},[e._v(" مرحبا بك: "+e._s(e.user.first_name)+" ")]):e.codeAuth?t("h2",{staticClass:"text-center"},[e._v(" جاري تسجيل الدخول ... ")]):null!=e.serviceUrlStore.service_id||""!=e.serviceUrlStore.service_id?t("h4",{staticClass:"text-center"},[e._v(" يرجى تسجيل الدخول عبر بوابة اور الإلكترونية للتقديم على خدمة "),t("br"),t("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.serviceName))])]):null==e.serviceUrlStore.service_id||""==e.serviceUrlStore.service_id?t("h4",{staticClass:"text-center"},[e._v(" يرجى تسجيل الدخول عبر بوابة اور الإلكترونية ")]):e._e()]),e.token?t("div",{staticClass:"mt-2 text-center"},[e._m(0)]):e.codeAuth?t("div",{staticClass:"mt-2 text-center"},[e._m(1)]):t("div",{staticClass:"mt-2 text-center"},[t("a",{staticClass:"btn btn-success btn-lg",attrs:{href:e.urURL+"client_id="+e.cID+"&redirect_uri="+e.cURL+"&serviceName="+e.serviceName+"&sID="+e.serviceUrlStore.service_id+"&pNo="}},[t("i",{staticClass:"fa"}),e._v("اضغط هنا للتسجيل ")]),t("br"),t("img",{attrs:{src:s("f4c7"),alt:"تسجيل الدخول عبر بوابة اور",width:"35%"}})])])]),t("div",{staticClass:"modal fade",attrs:{id:"loginFailed",tabindex:"-1","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[e._m(2),t("div",{staticClass:"modal-body"},[null!=e.loginFailed?t("h4",[e._v(" "+e._s(e.loginFailed)+" ")]):e._e(),t("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:e.logoutReset}},[e._v("مــوافق")])])])])])])])},r=[function(){var e=this,t=e._self._c;return t("h1",{staticClass:"display-1"},[t("i",{staticClass:"fa fa-check-circle fa-3x text-success",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("h1",{staticClass:"display-1"},[t("i",{staticClass:"fa fa-lock fa-3x text-primary",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[e._v(" الدخول عبر اور ")])])}],c=s("5530"),a=(s("b64b"),s("b0c0"),s("1157")),o=s.n(a),n=s("bc3a"),l=s.n(n),d=s("2f62"),v=s("3d20"),u=s.n(v),h="https://eservice.ur.gov.iq/api/",_="https://ur.gov.iq/verify-auth?",m="11",f="https://eservice.ur.gov.iq/index/user-auth",p={name:"userAuth",title:"تفعيل الحساب",data:function(){return{urURL:_,cID:m,cURL:f,codeAuth:null,serviceUrl:{},loginFailed:null,hideErr:[]}},computed:Object(c["a"])(Object(c["a"])({},Object(d["c"])(["token","user","serviceUrlStore"])),{},{serviceName:function(){return 0!=Object.keys(this.serviceUrl).length?this.serviceUrl.service_name:""}}),methods:Object(c["a"])({},Object(d["b"])(["setUserAction","setTokenAction","setRolesAction","setServiceUrl","logoutReset"])),mounted:function(){var e=this;this.codeAuth=this.$route.query.code;var t=this.$loading.show({container:this.$refs.formContainer,loader:"dots",transition:"fade",color:"#c30734"});if(this.codeAuth){if(this.token&&null!=this.user.org)var s={Authorization:"Bearer "+this.token},i="employee/oauth/login_by_code?code=";else i="oauth/login_by_code?code=";l.a.get(h+i+this.codeAuth,{headers:s}).then((function(s){200==s.status&&(t.hide(),e.setUserAction(s.data.user),e.setTokenAction(s.data.access_token),e.setRolesAction(s.data.roles),u.a.fire({icon:"success",title:s.data.message,showConfirmButton:!1,timer:1e3}).then((function(){e.token&&null!=e.user.org?location.assign("/employee/dashboard/"):location.assign("/"+e.serviceUrlStore.service_url)})))})).catch((function(s){t.hide(),e.hideErr.push(s),400==s.response.status?u.a.fire({icon:"warning",title:"صلاحية المصادقة منتهية",showConfirmButton:!1,timer:1700}).then((function(){location.assign("/index/user-auth")})):422==s.response.status&&(e.loginFailed=s.response.data.errors[0][0],o()("#loginFailed").modal({backdrop:"static",keyboard:!1,show:!0}))}))}else this.codeAuth=null,null==this.serviceUrlStore?(t.hide(),this.$router.push("/")):null==this.serviceUrlStore.service_id?(t.hide(),this.serviceUrl={service_url:this.serviceUrlStore.service_url,service_id:this.serviceUrlStore.service_id,service_name:getService.name},this.setServiceUrl(this.serviceUrl)):(t.hide(),l.a.get(h+"service/homepage/active/"+this.serviceUrlStore.service_id).then((function(s){var i=s.data.data,r=s.data.data.version;if(e.serviceUrl={service_url:"v1"==r?"customer/apply-service/".concat(e.serviceUrlStore.service_id):"customer/applyService/".concat(e.serviceUrlStore.service_id),service_id:e.serviceUrlStore.service_id,service_name:i.name,service_org:i.org.name},e.setServiceUrl(e.serviceUrl),"inactive"==i.status)return location.assign("/service-end");0==i.login_required&&"v1"==r?(e.setServiceUrl(null),e.$router.push({name:"publicApplyServiceV1",params:{id:i.id}})):(e.serviceUrl={service_url:"v1"==r?"customer/apply-service/".concat(e.serviceUrlStore.service_id):"customer/applyService/".concat(e.serviceUrlStore.service_id),service_id:e.serviceUrlStore.service_id,service_name:i.name},e.setServiceUrl(e.serviceUrl)),t.hide()})).catch((function(s){t.hide(),e.hideErr.push(s)})));localStorage.removeItem("codeBol")}},g=p,U=(s("9cf8"),s("0c7c")),b=Object(U["a"])(g,i,r,!1,null,"21fc631e",null);t["default"]=b.exports},"37cc":function(e,t,s){},"9cf8":function(e,t,s){"use strict";s("37cc")},f4c7:function(e,t,s){e.exports=s.p+"img/user-auth.a54892e3.png"}}]);