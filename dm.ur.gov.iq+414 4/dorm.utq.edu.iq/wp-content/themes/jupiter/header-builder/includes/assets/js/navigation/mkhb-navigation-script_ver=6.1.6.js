window.MK=window.MK||{};MK.HB=MK.HB||{};(function($,window,document,undefined){var pluginName="HbMegaMenu",defaults={propertyName:"value"};var delayOut=400;var menus=[];function HbCustomMenu(element,options){this.element=element;this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.init();}HbCustomMenu.prototype={isOpen:false,timeout:null,init:function(){var that=this;$(this).each(function(index,menu){that.node=menu.element;that.addListeners(menu.element);var $menu=$(menu.element);$menu.addClass("dropdownJavascript");menus.push(menu.element);$menu.find('ul > li').each(function(index,submenu){if($(submenu).find('ul').length>0){$(submenu).addClass('with-menu');}});});},addListeners:function(menu){var that=this;$(menu).mouseover(function(e){that.handleMouseOver.call(that,e);}).mouseout(function(e){that.handleMouseOut.call(that,e);});},handleMouseOver:function(e){var that=this;this.clearTimeout();var item=e.target||e.srcElement;while(item.nodeName!='LI'&&item!=this.node){item=item.parentNode;}if(item.nodeName=='LI'){this.toOpen=item;this.timeout=setTimeout(function(){that.open.call(that);},this.options.delay);}},handleMouseOut:function(){var that=this;this.clearTimeout();var _delayOut=this.options.delay;if(delayOut){_delayOut=delayOut;}this.timeout=setTimeout(function(){that.close.call(that);},_delayOut);},clearTimeout:function(){if(this.timeout){clearTimeout(this.timeout);this.timeout=null;}},open:function(){var that=this;this.isOpen=true;var items=$(this.toOpen).parent().children('li');$(items).each(function(index,item){$(item).find("ul").each(function(index,submenu){if(item!=that.toOpen){$(item).removeClass("dropdownOpen");that.close(item);}else if(!$(item).hasClass('dropdownOpen')){$(item).addClass("dropdownOpen");var left=0;var node=submenu;while(node){left+=Math.abs(node.offsetLeft);node=node.offsetParent;}var right=left+submenu.offsetWidth;var menuHeight=$(submenu).outerHeight();var parentTop=$(submenu).offset().top-$(window).scrollTop();$(item).removeClass('dropdownRightToLeft');if(left<0)$(item).addClass('dropdownLeftToRight');if(right>document.body.clientWidth){$(item).addClass('dropdownRightToLeft');}}});});},close:function(node){if(!node){this.isOpen=false;node=this.node;}$(node).find('li').each(function(index,item){$(item).removeClass('dropdownOpen');});}};$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){$.data(this,"plugin_"+pluginName,new HbCustomMenu(this,options));}});};})(jQuery,window,document);(function($){'use strict';var onePageNavItem=function onePageNavItem(){var $this=$(this),link=$this.find('a'),anchor=MK.HB.utils.detectAnchor(link);if(!anchor.length)return;$this.removeClass('current-menu-item current-menu-ancestor current-menu-parent');var activeNav=function(state){return function(){$this[state?'addClass':'removeClass']('current-menu-item');window.history.replaceState(undefined,undefined,[state?anchor:' ']);};};MK.HB.utils.scrollSpy($(anchor)[0],{before:activeNav(false),active:activeNav(true),after:activeNav(false),});};var $navItems=$('.mkhb-js-nav').find('li');$(window).on('load',function(){setTimeout(function(){$navItems.each(onePageNavItem);},1000);});}(jQuery));(function($){'use strict';var MK=window.MK||{};MK.HB=window.MK.HB||{};MK.HB.utils=window.MK.HB.utils||{};MK.HB.val=window.MK.HB.val||window.MK.val||{};MK.HB.utils.scrollTo=function(offset){$('html, body').stop().animate({scrollTop:offset},{duration:1200,easing:"easeInOutExpo"});};MK.HB.utils.scrollToAnchor=function(hash){var $target=$(hash);if(!$target.length)return;var offset=$target.offset().top;offset=offset-MK.HB.val.offsetHeaderHeight(offset);if(hash==='#top-of-page')window.history.replaceState(undefined,undefined,' ');else window.history.replaceState(undefined,undefined,hash);MK.HB.utils.scrollTo(offset);};MK.HB.utils.scroll=(function(){var keys=[38,40];function preventDefault(e){e=e||window.event;e.preventDefault();e.returnValue=false;}function wheel(e){preventDefault(e);}function keydown(e){for(var i=keys.length;i--;){if(e.keyCode===keys[i]){preventDefault(e);return;}}}function disableScroll(){if(window.addEventListener){window.addEventListener('DOMMouseScroll',wheel,false);}window.onmousewheel=document.onmousewheel=wheel;document.onkeydown=keydown;}function enableScroll(){if(window.removeEventListener){window.removeEventListener('DOMMouseScroll',wheel,false);}window.onmousewheel=document.onmousewheel=document.onkeydown=null;}return{disable:disableScroll,enable:enableScroll};})();MK.HB.utils.detectAnchor=function(el){var $this=$(el),href=$this.attr('href'),linkSplit=(href)?href.split('#'):'',hrefHash=linkSplit[1]?linkSplit[1]:'';if(typeof hrefHash!=='undefined'&&hrefHash!==''){return'#'+hrefHash;}else{return false;}};MK.HB.utils.scrollToURLHash=function(){var loc=window.location,hash=loc.hash;if(hash.length&&hash.substring(1).length){hash=hash.replace('!loading','');setTimeout(function(){MK.HB.utils.scrollToAnchor(hash);},1000);setTimeout(function(){window.history.replaceState(undefined,undefined,hash);},1001);}};MK.HB.utils.scrollSpy=function(toSpy,config){var $window=$(window),container=document.getElementById('mk-theme-container'),isObj=(typeof toSpy==='object'),offset=(isObj)?MK.HB.val.dynamicOffset(toSpy,config.position,config.threshold):function(){return toSpy;},height=(isObj)?MK.HB.val.dynamicHeight(toSpy):function(){return 0;},cacheVals={},_p='before';var checkPosition=function(){var s=MK.HB.val.scroll(),o=offset(),h=height();if(s<o&&_p!=='before'){if(config.before)config.before();_p='before';}else if(s>=o&&s<=o+h&&_p!=='active'){if(config.active)config.active(o);_p='active';}else if(s>o+h&&_p!=='after'){if(config.after)config.after(o+h);_p='after';}};var rAF=function(){window.requestAnimationFrame(checkPosition);};var exportVals=function(){return cacheVals;};var updateCache=function(){var o=offset(),h=height();cacheVals={before:o-$window.height(),active:o,after:o+h};};if(config.cache){config.cache(exportVals);}checkPosition();$window.on('load',checkPosition);$window.on('resize',checkPosition);$window.on('mouseup',checkPosition);window.addResizeListener(container,checkPosition);$window.on('scroll',rAF);updateCache();$window.on('load',updateCache);$window.on('resize',updateCache);window.addResizeListener(container,updateCache);};}(jQuery));(function($){'use strict';var hasTouchscreen=('ontouchstart'in document.documentElement);if(!hasTouchscreen)return;$('.mkhb-navigation .menu-item-has-children').each(normalizeClick);function normalizeClick(){$(this).on('click',handleClick);}function handleClick(e){var $this=$(e.currentTarget);var $child=$this.find('> ul');var isVisible=$child.css('display')!=='none';if(!isVisible){e.preventDefault();e.stopPropagation();}}}(jQuery));