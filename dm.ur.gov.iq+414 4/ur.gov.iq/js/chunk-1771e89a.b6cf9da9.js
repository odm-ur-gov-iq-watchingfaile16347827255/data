(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1771e89a"],{"13c6":function(t,e,a){"use strict";a("c132")},a462:function(t,e,a){"use strict";a("d4c1")},c132:function(t,e,a){},ca08:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination",class:""+t.pagination_size},[a("li",{staticClass:"page-item",class:1==t.current_page?" disabled":""},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.getItems(t.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:t.current_page==e?" active":""},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return t.getItems(e)}}},[t._v(t._s(e)+" "),a("span",{staticClass:"sr-only"},[t._v("(current)")])])])})),a("li",{class:t.current_page==t.last_page?"page-item disabled":"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.getItems(t.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},i=[],l={name:"paginationComponent",props:["current_page","last_page","pagination_size","num_show"],computed:{pages(){const t=Math.min(this.num_show,this.last_page);let e=this.current_page-Math.floor(t/2);return e=Math.max(e,1),e=Math.min(e,this.last_page-t+1),[...Array(t)].map((t,a)=>a+e)}},methods:{getItems(t){this.$emit("changePage",t)}}},r=l,n=a("2877"),o=Object(n["a"])(r,s,i,!1,null,null,null);e["a"]=o.exports},d4c1:function(t,e,a){},ead4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cat-service counts"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row search"},[a("div",{staticClass:"col-lg-4 col-md-5 col-12 all"},[a("router-link",{staticClass:"filter-result",attrs:{to:"/all-cats"}},[a("i",{staticClass:"fa fa-building"}),t._v(" "+t._s(t.$t("category"))+" ")]),a("span",{staticClass:"mx-2"},[t._v("|")]),a("button",{staticClass:"filter-result btn-sm",class:"all"==t.parentType?"active-parent":"",attrs:{type:"button"},on:{click:function(e){t.parentType="all",t.orgFilterModel(t.currentPage,3)}}},[a("i",{staticClass:"fa fa-archive"}),t._v(" "+t._s(t.$t("allServices"))+" ")])],1),a("div",{staticClass:"col-md-4 col-12"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.orgFilter,expression:"orgFilter"}],staticClass:"form-control",attrs:{placeholder:t.$t("searchService"),"aria-describedby":"basic-addon2"},domProps:{value:t.orgFilter},on:{input:function(e){e.target.composing||(t.orgFilter=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.serviceFilter(t.currentPage)}}},[a("i",{staticClass:"fa fa-search"})])])])]),a("div",{staticClass:"col-md-3 col-12"},[a("button",{staticClass:"btn btn-primary btn-block btn-modal",attrs:{"data-toggle":"modal","data-target":"#modal-filter"}},[a("i",{staticClass:"fa fa-filter"}),t._v(" "+t._s(t.$t("advancedSearch"))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4 col-md-5 col-12 cats-wrap mb-3"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header",attrs:{id:"left_nav"}},[t._m(0),a("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("orgRelated")))])]),a("div",{staticClass:"left-nav collapse"},["Org"==t.parentType||null==t.parentType?a("ul",{staticClass:"list-group list-group-flush"},t._l(t.publichomeData.orgs,(function(e,s){return a("li",{key:s,staticClass:"list-group-item",class:e.id==t.orgID?"active":"",on:{click:t.collapseList}},[a("a",{staticClass:"stretched-link",class:"ar"==t.$i18n.locale?"pull-right":"pull-left",attrs:{href:"#"},on:{click:function(a){return t.getOrgsFunction(e.id,t.serviceType)}}},[t._v(t._s("ar"==t.$i18n.locale?e.name:e.name_en))]),a("span",{class:"ar"==t.$i18n.locale?"pull-left":"pull-right"},[t._v(t._s(e.service_list_count))])])})),0):t._e()])]),"all"==t.parentType||"Category"==t.parentType?a("button",{staticClass:"filter-result btn-block mt-2",attrs:{type:"button"},on:{click:t.resetParent}},[t._v(" "+t._s(t.$t("catMinistry"))+" ")]):t._e()]),a("div",{staticClass:"col-lg-8 col-md-7 col-12"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6 col-12"},[a("ol",{staticClass:"cd-breadcrumb mt-2"},[a("li",[a("router-link",{attrs:{to:"/"}},[t._v(t._s(t.$t("mainPage")))])],1),a("li",[a("router-link",{attrs:{to:"/all-orgs"}},[t._v(t._s(t.$t("catMinistry")))])],1),a("li",{staticClass:"current"},[a("em",[t._v(t._s("ar"===t.$i18n.locale?t.orgName_ar:t.orgName_en))])])])]),a("div",{staticClass:"col-sm-6 col-12"},[a("p",{staticClass:"mt-2"},[a("button",{staticClass:"filter-result btn-sm",class:2==t.serviceType?"active-result":"",attrs:{type:"button"},on:{click:function(e){return t.orgFilterModel(t.currentPage,2)}}},[a("i",{staticClass:"fa fa-file"}),t._v(" "+t._s(t.$t("menual"))+" ")]),a("span",{staticClass:"mx-2"},[t._v("|")]),a("button",{staticClass:"filter-result sort btn-sm",class:1==t.serviceType?"active-result":"",attrs:{type:"button"},on:{click:function(e){return t.orgFilterModel(t.currentPage,1)}}},[a("i",{staticClass:"fa fa-desktop"}),t._v(" "+t._s(t.$t("eForm"))+" ")])])]),0==t.serviceTotal?a("div",{staticClass:"col-12"},[a("h3",{staticClass:"text-center text-danger"},[t._v(" "+t._s(t.$t("sorryNoData"))+" "),a("i",{staticClass:"fa fa-exclamation-triangle text-dark"})])]):t._l(t.serviceList,(function(e,s){return a("div",{key:s,staticClass:"col-md-6 col-12"},[a("div",{staticClass:"count-list"},[a("p",{staticClass:"font-weight-bold"},[a("router-link",{staticClass:"stretched-link",attrs:{to:{name:"allServicesPage.show",params:{s_id:e.id,parent_id:t.orgID,parent_type:"org"}}}},[t._v(" "+t._s("ar"==t.$i18n.locale?t.truncateWords(e.name):t.truncateWords(e.name_en))+" ")])],1),a("em",[t._v(t._s("ar"==t.$i18n.locale?e.category.title:e.category.title_en))]),a("p",[1==e.login_required&&null==e.ur_service?a("router-link",{staticClass:"mx-3",attrs:{to:"#"}},[a("i",{staticClass:"fa fa-key"}),t._v(" "+t._s(t.$t("loginRequired")))]):1==e.login_required&&null!=e.ur_service?a("router-link",{staticClass:"mx-3",attrs:{to:"/login"}},[a("i",{staticClass:"fa fa-key"}),t._v(" "+t._s(t.$t("loginRequired")))]):t._e()],1),a("p",[1==e.type?a("span",{staticClass:"mx-3"},[a("i",{staticClass:"fa fa-desktop"}),t._v(" "+t._s(t.$t("eForm")))]):t._e(),2==e.type?a("span",{staticClass:"mx-3"},[a("i",{staticClass:"fa fa-file"}),t._v(" "+t._s(t.$t("menual")))]):t._e(),a("span",{staticStyle:{color:"#c30734"}},[a("i",{staticClass:"fa fa-star"}),t._v(" "+t._s(0==e.avg_rating?"--":e.avg_rating))])])])])}))],2),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("pagination",{attrs:{current_page:t.currentPage,last_page:t.lastPage,num_show:t.numShow,pagination_size:""},on:{changePage:t.getItems}})],1),a("div",{staticClass:"col-md-4 per-page"},[t._v(" ("+t._s(t.currentPage)+" - "+t._s(t.lastPage)+") "+t._s(t.$t("totalNo"))+" : "),a("span",{staticClass:"text-primary"},[t._v(t._s(t.totalRows))])])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"modal-filter",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content filter-modal"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("advancedSearch")))]),t._m(1)]),a("div",{staticClass:"modal-body"},[a("form",{ref:"form"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"phone-input"}},[t._v(t._s(t.$t("serviceType")))]),a("treeselect",{attrs:{dir:"ar"==t.$i18n.locale?"rtl":"ltr",multiple:!1,options:t.serviceTypeFilter.map((function(e){return{label:"ar"==t.$i18n.locale?e.label:e.label_en,id:e.id}})),placeholder:t.$t("searchBy"),noResultsText:t.$t("sorryNoData")},model:{value:t.serviceType,callback:function(e){t.serviceType=e},expression:"serviceType"}})],1),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label mx-2",attrs:{for:"phone-input"}},[t._v(t._s(t.$t("searchBy"))+" : ")]),a("br"),a("button",{staticClass:"filter-result btn-sm",class:"Category"==t.parentType?"active-parent":"",attrs:{type:"button"},on:{click:function(e){t.parentType="Category"}}},[a("i",{staticClass:"fa fa-sitemap"}),t._v(" "+t._s(t.$t("category"))+" ")]),a("span",{staticClass:"mx-2"},[t._v("|")]),a("button",{staticClass:"filter-result btn-sm",class:"Org"==t.parentType?"active-parent":"",attrs:{type:"button"},on:{click:function(e){t.parentType="Org"}}},[a("i",{staticClass:"fa fa-building"}),t._v(" "+t._s(t.$t("catMinistry"))+" ")]),a("span",{staticClass:"mx-2"},[t._v("|")]),a("button",{staticClass:"filter-result btn-sm",class:"all"==t.parentType?"active-parent":"",attrs:{type:"button"},on:{click:function(e){t.parentType="all"}}},[a("i",{staticClass:"fa fa-archive"}),t._v(" "+t._s(t.$t("all"))+" ")])]),"Category"==t.parentType?a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"phone-input"}},[t._v(t._s(t.$t("category")))]),a("treeselect",{attrs:{dir:"ar"==t.$i18n.locale?"rtl":"ltr",multiple:!1,options:t.publichomeData.categories.map((function(e){return{label:"ar"==t.$i18n.locale?e.name:e.name_en,id:e.id}})),placeholder:t.$t("category"),noResultsText:t.$t("sorryNoData")},model:{value:t.inSearch,callback:function(e){t.inSearch=e},expression:"inSearch"}})],1):t._e(),"Org"==t.parentType?a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"phone-input"}},[t._v(t._s(t.$t("catMinistry")))]),a("treeselect",{attrs:{dir:"ar"==t.$i18n.locale?"rtl":"ltr",multiple:!1,options:t.publichomeData.orgs.map((function(e){return{label:"ar"==t.$i18n.locale?e.name:e.name_en,id:e.id}})),placeholder:t.$t("catMinistry"),noResultsText:t.$t("sorryNoData")},model:{value:t.inSearch,callback:function(e){t.inSearch=e},expression:"inSearch"}})],1):t._e(),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"phone-input"}},[t._v(t._s(t.$t("serviceCat")))]),a("treeselect",{attrs:{dir:"ar"==t.$i18n.locale?"rtl":"ltr",multiple:!1,options:t.serviceSortBy.map((function(e){return{label:"ar"==t.$i18n.locale?e.label:e.label_en,id:e.id}})),placeholder:"ar"==t.$i18n.locale?"بحث عن التصنيف":"search by Category",noResultsText:t.$t("sorryNoData")},model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}})],1)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s(t.$t("closeBtn"))+" ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.orgFilterModel(t.currentPage,t.serviceType)}}},[t._v(" "+t._s(t.$t("continueBtn"))+" ")])])])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn navbar-toggle pull-left collapse-btn",attrs:{"data-target":".left-nav","data-toggle":"collapse","aria-expanded":"true","aria-controls":".left-nav",type:"button"}},[a("i",{staticClass:"fa fa-angle-down icon-nav"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],l=(a("14d9"),a("1157")),r=a.n(l),n=a("bc3a"),o=a.n(n),c=a("ca17"),u=a("2f62"),p=a("ca08");const d="https://ur.gov.iq/api/";var g={name:"orgService",metaInfo:{title:"خدمات الفئات"},components:{Pagination:p["a"],Treeselect:c["Treeselect"]},data(){return{parentType:null,inSearch:null,serviceType:null,serviceTypeFilter:[{id:1,label:"الكترونية",label_en:"e-Form"},{id:2,label:"ورقية",label_en:"manual"},{id:3,label:"الكل",label_en:"All"}],sortBy:null,serviceSortBy:[{id:"sort",label:"التسلسل",label_en:"Sort"},{id:"date",label:"التاريخ",label_en:"Date"},{id:"hits",label:"الاكثر وصولاً",label_en:"Most Accessible"}],orgFilter:"",orgName_ar:null,orgName_en:null,serviceList:[],prevRoute:null,perPage:null,totalRows:null,lastPage:null,numShow:5,orgID:null,serviceTotal:null,hideErr:[]}},computed:{...Object(u["c"])(["token","currentPage","publichomeData"])},watch:{parentType(){this.inSearch=null},inSearch(){void 0==this.inSearch&&(this.inSearch=null)}},methods:{...Object(u["b"])(["setCurrentPageAction"]),truncateWords(t,e=15){if(!t)return"";const a=t.split(" ");return a.length<=e?t:a.slice(0,e).join(" ")+"..."},collapseList(){var t=document.getElementsByClassName("left-nav collapse show");t.length>0&&t[0].classList.remove("show")},singleNotification(t){this.$toast.warning(t,{position:"top-right",timeout:6e3,closeOnClick:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!0})},resetParent(){this.parentType=null,this.inSearch=null,this.getOrgsFunction(this.publichomeData.orgs[0].id,this.serviceType)},serviceFilter(t){let e=this.$loading.show({container:this.$refs.newsContainer},{default:this.$createElement("CustomLoader")});var a={};if(this.orgFilter){a="ar"==this.$i18n.locale?{model:"ServiceList",col_value:{name:{value:this.orgFilter,type:"search"},org_id:{value:this.orgID,type:"select"}}}:{model:"ServiceList",col_value:{name_en:{value:this.orgFilter,type:"search"},org_id:{value:this.orgID,type:"select"}}};const s="?page="+t;o.a.post(d+"public/search"+s,a).then(t=>{e.hide(),this.serviceList=t.data.data,this.serviceTotal=this.serviceList.length,this.orgName_ar=this.orgFilter,this.orgName_en=this.orgFilter,this.perPage=t.data.meta.per_page,this.totalRows=t.data.meta.total,this.lastPage=t.data.meta.last_page;var a=t.data.meta.current_page;this.setCurrentPageAction(a),0==response.data.data.length&&1!=a&&this.setCurrentPageAction(1)})}else e.hide(),this.getOrgsFunction(this.orgID,this.serviceType)},orgFilterModel(t,e=this.serviceType){if(t&&void 0!==t||(t=1),this.parentType)if("all"==this.parentType)s={all:1};else var a={all:0,id:this.inSearch,in:this.parentType};else var s={all:0,id:this.orgID,in:"Org"};var i={...s,service_type:e||3,sort_by:this.sortBy?this.sortBy:"hits",...a};if("Category"!=this.parentType||this.inSearch)if("Org"!=this.parentType||this.inSearch){if(this.inSearch&&(this.orgID=this.inSearch),e!=this.serviceType)var l="?page=1";else l="?page="+t;this.serviceType=e;let a=this.$loading.show({container:this.$refs.newsContainer},{default:this.$createElement("CustomLoader")});o.a.post(d+"public/services"+l,i).then(t=>{if(200==t.status){a.hide(),r()("#modal-filter").modal("hide"),this.serviceList=t.data.data,this.serviceTotal=this.serviceList.length;for(var e=0;e<this.publichomeData.orgs.length;e++)if(this.publichomeData.orgs[e].id==this.orgID){this.orgName_ar=this.publichomeData.orgs[e].name,this.orgName_en=this.publichomeData.orgs[e].name_en;break}this.perPage=t.data.meta.per_page,this.totalRows=t.data.meta.total,this.lastPage=t.data.meta.last_page;var s=t.data.meta.current_page;this.setCurrentPageAction(s)}}).catch(t=>{a.hide(),this.hideErr.push(t)})}else this.singleNotification("يرجى اختيار الجهة");else this.singleNotification("يرجى اختيار الفئة")},getOrgsFunction(t,e){var a;a=this.orgID!=t?1:this.currentPage,this.orgID=t,this.parentType=null,this.orgFilterModel(a,e)},getItems(t=this.currentPage){this.orgFilterModel(t,this.serviceType)}},beforeRouteEnter(t,e,a){a(t=>{t.prevRoute=e})},mounted(){"allServicesPage.show"!=this.prevRoute.name?this.setCurrentPageAction(1):this.currentPage,this.orgID=this.$route.params.org_id,this.getOrgsFunction(this.$route.params.org_id,this.serviceType)}},h=g,v=(a("13c6"),a("a462"),a("2877")),m=Object(v["a"])(h,s,i,!1,null,"34706564",null);e["default"]=m.exports}}]);