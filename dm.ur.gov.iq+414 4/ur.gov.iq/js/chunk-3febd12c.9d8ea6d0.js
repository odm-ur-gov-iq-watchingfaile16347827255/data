(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3febd12c"],{"0366":function(e,t,i){var o=i("e330"),a=i("59ed"),r=i("40d5"),n=o(o.bind);e.exports=function(e,t){return a(e),void 0===t?e:r?n(e,t):function(){return e.apply(t,arguments)}}},"182d":function(e,t,i){var o=i("f8cd"),a=RangeError;e.exports=function(e,t){var i=o(e);if(i%t)throw a("Wrong offset");return i}},"19aa":function(e,t,i){var o=i("3a9b"),a=TypeError;e.exports=function(e,t){if(o(t,e))return e;throw a("Incorrect invocation")}},"1d02":function(e,t,i){"use strict";var o=i("ebb5"),a=i("a258").findLastIndex,r=o.aTypedArray,n=o.exportTypedArrayMethod;n("findLastIndex",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},"3c5d":function(e,t,i){"use strict";var o=i("da84"),a=i("c65b"),r=i("ebb5"),n=i("07fa"),s=i("182d"),l=i("7b0b"),c=i("d039"),d=o.RangeError,u=o.Int8Array,h=u&&u.prototype,p=h&&h.set,m=r.aTypedArray,f=r.exportTypedArrayMethod,v=!c((function(){var e=new Uint8ClampedArray(2);return a(p,e,{length:1,0:3},1),3!==e[1]})),g=v&&r.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var e=new u(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));f("set",(function(e){m(this);var t=s(arguments.length>1?arguments[1]:void 0,1),i=l(e);if(v)return a(p,this,i,t);var o=this.length,r=n(i),c=0;if(r+t>o)throw d("Wrong length");while(c<r)this[t+c]=i[c++]}),!v||g)},"4b11":function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},"54e5":function(e,t,i){"use strict";i("cd27")},"69be":function(e,t,i){},"907a":function(e,t,i){"use strict";var o=i("ebb5"),a=i("07fa"),r=i("5926"),n=o.aTypedArray,s=o.exportTypedArrayMethod;s("at",(function(e){var t=n(this),i=a(t),o=r(e),s=o>=0?o:i+o;return s<0||s>=i?void 0:t[s]}))},"986a":function(e,t,i){"use strict";var o=i("ebb5"),a=i("a258").findLast,r=o.aTypedArray,n=o.exportTypedArrayMethod;n("findLast",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},a258:function(e,t,i){var o=i("0366"),a=i("44ad"),r=i("7b0b"),n=i("07fa"),s=function(e){var t=1==e;return function(i,s,l){var c,d,u=r(i),h=a(u),p=o(s,l),m=n(h);while(m-- >0)if(c=h[m],d=p(c,m,u),d)switch(e){case 0:return c;case 1:return m}return t?-1:void 0}};e.exports={findLast:s(0),findLastIndex:s(1)}},b7ef:function(e,t,i){"use strict";var o=i("23e7"),a=i("da84"),r=i("d066"),n=i("5c6c"),s=i("9bf2").f,l=i("1a2d"),c=i("19aa"),d=i("7156"),u=i("e391"),h=i("cf98"),p=i("0d26"),m=i("83ab"),f=i("c430"),v="DOMException",g=r("Error"),_=r(v),y=function(){c(this,C);var e=arguments.length,t=u(e<1?void 0:arguments[0]),i=u(e<2?void 0:arguments[1],"Error"),o=new _(t,i),a=g(t);return a.name=v,s(o,"stack",n(1,p(a.stack,1))),d(o,this,y),o},C=y.prototype=_.prototype,b="stack"in g(v),E="stack"in new _(1,2),T=_&&m&&Object.getOwnPropertyDescriptor(a,v),k=!!T&&!(T.writable&&T.configurable),w=b&&!k&&!E;o({global:!0,constructor:!0,forced:f||w},{DOMException:w?y:_});var S=r(v),$=S.prototype;if($.constructor!==S)for(var R in f||s($,"constructor",n(1,S)),h)if(l(h,R)){var U=h[R],I=U.s;l(S,I)||s(S,I,n(6,U.c))}},c2a8:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"box"},[i("h4",{staticClass:"box-head"},[e._v(e._s(e.$t("loginHeader")))]),i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"text-login"},[null==e.serviceUrlStore?i("h4",{staticClass:"ur-login-text text-center"},[e._v(" "+e._s(e.$t("loginToUr"))+" "+e._s(e.$t("urGate"))+" ")]):e._e(),null==e.serviceUrlStore||0!=e.serviceUrlStore.phoneNum&&null!=e.serviceUrlStore.phoneNum?null==e.serviceUrlStore||0==e.serviceUrlStore.phoneNum&&null==e.serviceUrlStore.phoneNum?e._e():i("h3",{staticClass:"ur-login-text text-center"},[i("span",{staticClass:"text-danger"},[e._v(e._s(e.serviceUrlStore.serviceName))])]):i("h3",{staticClass:"ur-login-text text-center"},[e._v(" "+e._s(e.$t("serviceStore"))+" "),i("span",{staticClass:"text-danger"},[e._v(e._s(e.serviceUrlStore.serviceName))])])])]),i("div",{staticClass:"col-md-4 offset-md-4 col-12 login-type animate__animated animate__fadeInUp"},[i("button",{staticClass:"btn btn-red-outline btn-block",attrs:{id:"phoneSMS"},on:{click:function(t){return e.loginType("phoneLogin")}}},[i("i",{staticClass:"fa fa-mobile"}),e._v(" "+e._s(e.$t("loginPhone"))+" ")])]),"phoneLogin"==e.selectLogin?i("div",{staticClass:"col-md-8 offset-md-2 col-12"},[i("p",{staticClass:"animate__animated animate__fadeInUp"},[i("i",{staticClass:"fa fa-circle text-success mx-2"}),e._v(" "+e._s(e.$t("loginPhone"))+" ")]),"phoneLogin"==e.selectLogin?i("phone-login",{staticClass:"animate__animated animate__fadeInUp",attrs:{login_type:e.selectLogin},on:{showOptionLogin:e.showOptionLoginFunction,openSkip:e.skipEmailPhone}}):e._e(),e.showloginOption?i("hr"):e._e(),e.showloginOption?i("p",{staticClass:"animate__animated animate__fadeIn"},[e._v(" "+e._s(e.$t("notOTPCode"))+" "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.loginType("optFailed")}}},[e._v(e._s(e.$t("anotherWay")))])]):e._e(),e.showloginOptionVisitor?i("p",{staticClass:"animate__animated animate__fadeIn"},[e._v(" "+e._s(e.$t("noteIraqi"))+" "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.loginType("optFailed")}}},[e._v(e._s(e.$t("anotherWayVisitor")))])]):e._e()],1):e._e(),i("div",{staticClass:"col-md-4 offset-md-4 col-12 login-type animate__animated animate__fadeInUp"},[i("button",{staticClass:"btn btn-red-outline btn-block",attrs:{id:"emailOTP"},on:{click:function(t){return e.loginType("emailLogin")}}},[i("i",{staticClass:"fa fa-envelope"}),e._v(" "+e._s(e.$t("loginEmail"))+" ")])]),"emailLogin"==e.selectLogin?i("div",{staticClass:"col-md-8 offset-md-2 col-12"},[i("p",{staticClass:"animate__animated animate__fadeInDown"},[i("i",{staticClass:"fa fa-circle text-success mx-2"}),e._v(" "+e._s(e.$t("loginEmail"))+" ")]),"emailLogin"==e.selectLogin?i("email-login",{staticClass:"animate__animated animate__fadeInUp",on:{openSkip:e.skipEmailPhone}}):e._e(),i("hr"),i("p",{staticClass:"animate__animated animate__fadeIn"},[e._v(" "+e._s(e.$t("notOTPCode"))+" "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.loginType("optFailed")}}},[e._v(e._s(e.$t("anotherWay")))])])],1):e._e(),e.loginTelegramFlag?i("div",{staticClass:"col-md-4 offset-md-4 col-12 login-type animate__animated animate__fadeInUp"},[i("button",{staticClass:"btn btn-red-outline btn-block",attrs:{id:"telegramOTP"},on:{click:function(t){return e.loginType("telegramLogin")}}},[i("i",{staticClass:"fa fa-send"}),e._v(" "+e._s(e.$t("loginTelegram"))+" ")])]):e._e(),"telegramLogin"==e.selectLogin&&e.loginTelegramFlag?i("div",{staticClass:"col-md-8 offset-md-2 col-12"},[i("p",{staticClass:"animate__animated animate__fadeInUp"},[i("i",{staticClass:"fa fa-circle text-success mx-2"}),e._v(" "+e._s(e.$t("loginTelegram"))+" ")]),"telegramLogin"==e.selectLogin?i("phone-login",{staticClass:"animate__animated animate__fadeInUp",attrs:{login_type:e.selectLogin},on:{openSkip:e.skipEmailPhone}}):e._e(),i("hr"),i("p",{staticClass:"animate__animated animate__fadeIn"},[e._v(" "+e._s(e.$t("notOTPCode"))+" "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.loginType("optFailed")}}},[e._v(e._s(e.$t("anotherWay")))])])],1):e._e()])])]),i("div",{staticClass:"modal fade",attrs:{id:"skipPhone",tabindex:"-1","data-backdrop":"static","data-keyboard":"false",role:"dialog","aria-labelledby":"skipEmailTitle","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[i("div",{staticClass:"modal-content note"},[i("div",{staticClass:"modal-body"},[i("h4",{staticStyle:{color:"#c30734"}},[e._v(e._s(e.$t("dearCitizen")))]),i("p",[e._v(e._s(e.$t("skipPhone")))]),"skipPhone"==e.openModal?i("edit-phone",{staticClass:"animate__animated animate__fadeInUp",attrs:{component_place:"login",phone_num:e.user.phone_num}}):e._e()],1),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-red-outline",attrs:{type:"button"},on:{click:e.callSkipFunc}},[e._v(" "+e._s("ar"==e.$i18n.locale?"تخطي":"Skip")+" ")])])])])]),i("div",{staticClass:"modal fade",attrs:{id:"skipEmail",tabindex:"-1","data-backdrop":"static","data-keyboard":"false",role:"dialog","aria-labelledby":"skipEmailTitle","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[i("div",{staticClass:"modal-content note"},[i("div",{staticClass:"modal-body"},[i("h4",{staticStyle:{color:"#c30734"}},[e._v(e._s(e.$t("dearCitizen")))]),i("p",[e._v(e._s(e.$t("skipEmail")))]),"skipEmail"==e.openModal?i("edit-user-email",{staticClass:"animate__animated animate__fadeInUp",attrs:{user_email:e.user.email,component_place:"login"}}):e._e()],1),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-red-outline",attrs:{type:"button"},on:{click:e.callSkipFunc}},[e._v(" "+e._s("ar"==e.$i18n.locale?"تخطي":"Skip")+" ")])])])])])])},a=[],r=(i("14d9"),i("1157")),n=i.n(r),s=i("2f62"),l=i("3d20"),c=i.n(l),d=i("59b7"),u=i("f8a3"),h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"form-horizontal",attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.activePhone.apply(null,arguments)}}},[i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-12 col-form-label",attrs:{for:"codeCountryID"}},[e._v(e._s(e.$t("codeCountry")))]),i("div",{staticClass:"col-lg-7 col-md-9 col-12"},[i("treeselect",{class:"phoneLogin"==e.login_type&&(e.serviceUrlStore&&22!=e.serviceUrlStore.cID||null==e.serviceUrlStore)?"isDisabled":"",attrs:{dir:"ar"==e.$i18n.locale?"rtl":"ltr",id:"codeCountryID",multiple:!1,options:e.getCodes.map((function(e){return{label:"["+e.phone_code+"] "+e.name_en,id:e.id,icon:e.iso}})),"value-format":"object",placeholder:""+e.$t("countrySrch"),noResultsText:"Not Found"},scopedSlots:e._u([{key:"option-label",fn:function(t){var o=t.node,a=t.labelClassName;return i("label",{class:a},[i("span",{class:"fi fi-"+o.raw.icon.toLowerCase()}),e._v(" "+e._s(o.label)+" ")])}},{key:"value-label",fn:function(t){var o=t.node;return i("label",{},[i("span",{class:"fi fi-"+o.raw.icon.toLowerCase()}),e._v(" "+e._s(o.label)+" ")])}}]),model:{value:e.codeCountryID,callback:function(t){e.codeCountryID=t},expression:"codeCountryID"}})],1),!e.$v.codeCountryID.required&&e.$v.codeCountryID.$dirty?i("i",{staticClass:"text-danger"},[e._v(" "+e._s(e.$t("codeReq"))+" ")]):e._e()]),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-12 col-form-label",attrs:{for:"phoneNo"}},[e._v(e._s(e.$t("phoneLabel")))]),i("div",{staticClass:"col-lg-7 col-md-9 col-12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNo,expression:"phoneNo"}],staticClass:"form-control",attrs:{dir:"ar"==e.$i18n.locale?"rtl":"ltr",type:"number",id:"phoneNo",placeholder:e.checkCountry?"07xxxxxxxxx":e.$t("phoneLabel"),disabled:e.phoneShow},domProps:{value:e.phoneNo},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.activePhone.apply(null,arguments)},input:function(t){t.target.composing||(e.phoneNo=t.target.value)}}}),!e.$v.phoneNo.required&&e.$v.phoneNo.$dirty?i("i",{staticClass:"text-danger"},[e._v(e._s(e.$t("phoneReq")))]):e._e(),!e.$v.phoneNo.numeric&&e.$v.phoneNo.$dirty?i("i",{staticClass:"text-danger"},[e._v(" "+e._s(e.$t("onlyNum"))+" ")]):e._e()])]),e.showReqCode?i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-12 col-form-label",attrs:{for:"phoneCode"}},[e._v(e._s(e.$t("phoneCode")))]),i("div",{staticClass:"col-lg-7 col-md-9 col-12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneCode,expression:"phoneCode"}],staticClass:"form-control",attrs:{type:"number",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",maxlength:"5",id:"phoneCode",placeholder:"xxxxx"},domProps:{value:e.phoneCode},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleOk.apply(null,arguments)},input:function(t){t.target.composing||(e.phoneCode=t.target.value)}}})])]):e._e(),i("div",{staticClass:"form-group row"},[i("div",{staticClass:"col-md-3 col-0"}),i("div",{staticClass:"col-md-4 col-6"},[e.showReqCode?i("button",{staticClass:"btn btn-red-outline",attrs:{id:"sendCode",type:"button"},on:{click:e.handleOk}},[e._v(" "+e._s(e.$t("confirm"))+" ")]):e._e()]),i("div",{staticClass:"col-md-4 col-6"},[i("vac",{ref:"sendSMSCode",staticClass:"btn btn-red",attrs:{tag:"button",type:"button",autoStart:!1,"left-time":6e4},on:{click:e.activePhone,finish:function(t){return e.finish(t)}},scopedSlots:e._u([{key:"process",fn:function(t){var o=t.timeObj;return i("span",{},[e._v(" "+e._s(o.ceil.s+"s")+" ")])}},{key:"default",fn:function(t){var o=t.state;return"process"!==o?i("span",{},[e._v(e._s("ar"==e.$i18n.locale?e.buttonTxt:"Send"))]):e._e()}}],null,!0)})],1)]),"telegramLoginOld"==e.login_type?i("div",[e._m(0)]):e._e()])},p=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ol",[i("li",[e._v(" إذا لم تكن مشتركا في خدمة رسائل التلكرام الخاص ببوابة أور الالكترونية للخدمات الحكومية، "),i("span",{staticClass:"d-block"},[e._v(" قم بالاشتراك من خلال الضغط هنا "),i("a",{staticClass:"btn btn-link btn-sm",attrs:{href:"https://t.me/UR_Portal_Bot"}},[e._v("اشترك الان")]),e._v(" او من خلال رمز الوصول السريع "),i("img",{staticClass:"d-block",attrs:{src:"/static-img/tele.jpg",alt:"telegram QRCode",width:"25%"}})])]),i("li",[e._v(" عند اكتمال عملية الاشتراك قم بإدخال رقم الهاتف لإستكمال عملية الدخول ")]),i("li",[e._v(" إذا كنت مشتركا مسبقا قم بإدخال رقم الهاتف فقط، وسيصلك رمز التأكيد على التلكرام ")]),i("li",[e._v(" لمعرفة تفاصيل أكثر أو طلب المساعدة ؛ اتصل على الرقم المجاني 5599 ")])])}],m=(i("b7ef"),i("907a"),i("986a"),i("1d02"),i("3c5d"),i("69be"),i("b5ae")),f=i("bc3a"),v=i.n(f),g=i("ca17");const _="https://ur.gov.iq/api/";var y={name:"phoneLogin",props:["login_type"],metaInfo:{title:"تسجيل الدخول"},components:{Treeselect:g["Treeselect"]},data(){return{getCodes:[],codeCountryID:null,countryKey:null,buttonTxt:"ارسـال",phoneCode:null,phoneNo:null,showReqCode:!1,phoneShow:!1,hideErr:[]}},validations:{codeCountryID:{required:m["required"]},phoneNo:{required:m["required"],numeric:m["numeric"]}},watch:{codeCountryID(){for(var e=0;e<this.getCodes.length;e++)if(this.getCodes[e].id==this.codeCountryID.id){this.countryKey=this.getCodes[e].phone_code;break}}},computed:{checkCountry(){return!("phoneLogin"!=this.login_type||!(this.serviceUrlStore&&22!=this.serviceUrlStore.cID||null==this.serviceUrlStore))||(this.serviceUrlStore&&22==this.serviceUrlStore.cID||"telegramLogin"==this.login_type?null!=this.codeCountryID&&!(!this.codeCountryID||102!=this.codeCountryID.id):void 0)},...Object(s["c"])(["user","token","roles","serviceUrlStore"])},methods:{...Object(s["b"])(["setUserAction","setTokenAction","setRolesAction","clearServiceUrl"]),singleNotification(e){this.$toast.error(e,{position:"ar"==this.$i18n.locale?"top-right":"top-left",timeout:6e3,closeOnClick:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:"ar"==this.$i18n.locale})},base64ToBlob(e,t){const i=atob(e),o=new Array(i.length).fill().map((e,t)=>i.charCodeAt(t)),a=new Uint8Array(o);return new Blob([a],{type:t})},openPdfInNewTab(e,t){const i="application/pdf",o=this.base64ToBlob(e,i),a=URL.createObjectURL(o),r=window.open(a,"_blank");if(!r){const e=document.createElement("a");e.href=a,e.download="URCertificate.pdf",e.click()}t.hide(),URL.revokeObjectURL(a)},activePhone(){if(this.$gtag.event("send-otp",{event_category:"user.login",event_label:"send OTP"}),this.$v.$touch(),!this.$v.$anyError)if(102==this.codeCountryID.id&&11!=this.phoneNo.length)"ar"==this.$i18n.locale?this.singleNotification("يجب ان يكون رقم الهاتف 11 رقم"):this.singleNotification("Phone number must be a set of 11 digits");else{const e=this,t=e.$refs.sendSMSCode;t.attrs.disabled=!0,e.buttonTxt="ar"==this.$i18n.locale?"أنتظار ":"Waiting";let i=1,o=setInterval(()=>{i>5&&(i=1),e.buttonTxt="أنتظار "+Array.apply(null,{length:i}).join("."),i++},300),a=this.$loading.show({container:this.$refs.newsContainer},{default:this.$createElement("CustomLoader")});v.a.post(_+"user/sendOTP",{phone_num:this.phoneNo,phone_code:this.countryKey,channel:"phoneLogin"==this.login_type?"phone":"telegram",lang:this.$i18n.locale}).then(i=>{if(a.hide(),clearInterval(o),200==i.status)return c.a.fire({icon:"success",title:i.data.message,showConfirmButton:!1,timer:1e3}),this.showReqCode=!0,this.phoneShow=!0,setTimeout((function(){document.getElementById("phoneCode").focus()}),1e3),t.startCountdown("restart"),void(t.attrs.disabled=!0);t.attrs.disabled=!1,e.buttonTxt="ar"==this.$i18n.locale?"خطا بالأرسال":"Submitting failed",this.$emit("showOptionLogin")}).catch(i=>{a.hide(),clearInterval(o),t.attrs.disabled=!1,e.buttonTxt="ar"==this.$i18n.locale?"إعادة المحاولة":"Try again",this.$emit("showOptionLogin"),this.hideErr.push(i)})}},finish(e){const t=this;t.buttonTxt="ar"==this.$i18n.locale?"إعادة أرسال":"Resubmit",e.attrs.disabled=!1,t.phoneShow=!1,this.$emit("showOptionLogin")},handleOk(){this.$gtag.event("login",{event_category:"user.login",event_label:"login with OTP"}),this.handleSubmit()},handleSubmit(){if(this.phoneCode){let e=this.$loading.show({container:this.$refs.newsContainer},{default:this.$createElement("CustomLoader")});v.a.post(_+"user/loginWithOTP",{phone_num:this.phoneNo,code:this.phoneCode,phone_code:this.countryKey,cid:null==this.serviceUrlStore?null:this.serviceUrlStore.cID,lang:this.$i18n.locale}).then(t=>{200==t.status&&(e.hide(),this.setUserAction(t.data.user),this.setTokenAction(t.data.access_token),this.setRolesAction(t.data.roles),c.a.fire({icon:"success",title:t.data.message,showConfirmButton:!1,timer:1e3}).then(()=>{this.routeUserCondition(t,e)}))}).catch(t=>{e.hide(),this.hideErr.push(t)})}else"ar"==this.$i18n.locale?this.singleNotification("رمز التحقق مطلوب"):this.singleNotification("Verification code is required")},routeUserCondition(e,t){if(null!=e.data.user.org)return location.assign("/employee/dashboard");if(null==this.serviceUrlStore&&0==e.data.user.registered)return t.hide(),location.assign("/sign-up");if(null==this.serviceUrlStore&&1==e.data.user.registered)return 1==e.data.user.client_user?location.assign("/customer/edit-national"):("visitor"==e.data.user.roles[0].name&&e.data.user.email_verified_at,t.hide(),location.assign("/customer/customer-request"));if(null!=this.serviceUrlStore&&0==e.data.user.registered)t.hide(),c.a.fire({icon:"warning",title:"ar"==this.$i18n.locale?"يرجى اكمال عملية التسجيل":"Please complete the registration process",showConfirmButton:!0}).then(()=>location.assign("/sign-up"));else{if(1==e.data.user.client_user)return location.assign("/customer/edit-national");t.hide(),this.$router.push({name:"verifyAuth",query:{cId:this.serviceUrlStore.cID,cUri:this.serviceUrlStore.cURL,serviceName:this.serviceUrlStore.serviceName,phoneNum:this.serviceUrlStore.phoneNum}})}},getCodeCountry(){let e=this.$loading.show({container:this.$refs.newsContainer},{default:this.$createElement("CustomLoader")});v.a.get(_+"phone_codes?lang="+this.$i18n.locale).then(t=>{if(200==t.status){e.hide(),this.getCodes=t.data.data;for(var i=102,o=0;o<this.getCodes.length;o++)if(this.getCodes[o].id==i){this.countryKey=this.getCodes[o].phone_code,this.codeCountryID={id:this.getCodes[o].id,label:"["+this.getCodes[o].phone_code+"] "+this.getCodes[o].name_en,code:this.getCodes[o].iso};break}}}).catch(t=>{e.hide(),this.hideErr.push(t)})},track(){this.$gtag.query("event","screen_view",{app_name:"UR Portal",screen_name:"الدخول للنظام"})}},mounted(){this.track(),this.$gtag.pageview(this.$route.name),null!=this.serviceUrlStore&&0!=this.serviceUrlStore.phoneNum&&(this.phoneNo=this.serviceUrlStore.phoneNum),this.getCodeCountry()}},C=y,b=i("2877"),E=Object(b["a"])(C,h,p,!1,null,null,null),T=E.exports,k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"email-login"},[i("form",{staticClass:"form-horizontal",attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.activeEmail.apply(null,arguments)}}},[i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-12 col-form-label",attrs:{for:"email"}},[e._v(e._s(e.$t("emailLabel")))]),i("div",{staticClass:"col-lg-7 col-md-9 col-12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{dir:"ar"==e.checkTrans?"rtl":"ltr",type:"email",id:"email",placeholder:e.$t("emailLabel"),disabled:e.emailShow},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),!e.$v.email.required&&e.$v.email.$dirty?i("i",{staticClass:"text-danger"},[e._v(e._s(e.$t("emailReq")))]):e._e(),!e.$v.email.email&&e.$v.email.$dirty?i("i",{staticClass:"text-danger"},[e._v(" "+e._s(e.$t("emailReq"))+" ")]):e._e()])]),e.showReqCode?i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-md-3 col-12 col-form-label",attrs:{for:"emailCode"}},[e._v(e._s(e.$t("codeNum")))]),i("div",{staticClass:"col-lg-7 col-md-9 col-12"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.emailCode,expression:"emailCode"}],staticClass:"form-control",attrs:{type:"number",oninput:"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",maxlength:"5",id:"emailCode",placeholder:"xxxxx"},domProps:{value:e.emailCode},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleOk.apply(null,arguments)},input:function(t){t.target.composing||(e.emailCode=t.target.value)}}})])]):e._e(),i("div",{staticClass:"form-group row"},[i("div",{staticClass:"col-md-3 col-0"}),i("div",{staticClass:"col-md-4 col-6"},[e.showReqCode?i("button",{staticClass:"btn btn-red-outline",attrs:{id:"sendCode",type:"button"},on:{click:e.handleOk}},[e._v(" "+e._s(e.$t("confirm"))+" ")]):e._e()]),i("div",{staticClass:"col-md-4 col-6"},[i("vac",{ref:"sendEmailCode",staticClass:"btn btn-red",attrs:{tag:"button",type:"button",autoStart:!1,"left-time":3e5},on:{click:e.activeEmail,finish:function(t){return e.finish(t)}},scopedSlots:e._u([{key:"process",fn:function(t){var o=t.timeObj;return i("span",{},[e._v(" "+e._s(o.ceil.s+"s")+" ")])}},{key:"default",fn:function(t){var o=t.state;return"process"!==o?i("span",{},[e._v(e._s("ar"==e.checkTrans?e.buttonTxt:"Send"))]):e._e()}}],null,!0)})],1)])])])},w=[];const S="https://ur.gov.iq/api/";var $={name:"emailLogin",components:{Treeselect:g["Treeselect"]},data(){return{get checkTrans(){return localStorage.getItem("locale")},buttonTxt:"ارسـال",emailCode:null,email:null,showReqCode:!1,emailShow:!1,hideErr:[]}},validations(){return{email:{required:m["required"],email:m["email"]}}},computed:{...Object(s["c"])(["user","token","roles","serviceUrlStore"])},methods:{...Object(s["b"])(["setUserAction","setTokenAction","setRolesAction"]),singleNotification(e){this.$toast.error(e,{position:"ar"==this.checkTrans?"top-right":"top-left",timeout:6e3,closeOnClick:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:"ar"==this.checkTrans})},emailValidate(e){const t=/^(?!.*\bemailabox\b)[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},activeEmail(){if(this.$v.$touch(),!this.$v.$anyError)if(this.emailValidate(this.email)){const e=this,t=e.$refs.sendEmailCode;t.attrs.disabled=!0,e.buttonTxt="ar"==this.checkTrans?"أنتظار ":"Waiting";let i=1,o=setInterval(()=>{i>5&&(i=1),e.buttonTxt="أنتظار "+Array.apply(null,{length:i}).join("."),i++},300),a=this.$loading.show({container:this.$refs.newsContainer},{default:this.$createElement("CustomLoader")});v.a.post(S+"user/email/sendOTP",{email:this.email,lang:this.checkTrans}).then(i=>{if(a.hide(),clearInterval(o),200==i.status)return c.a.fire({icon:"success",title:i.data.message,html:"en"==this.checkTrans?"<p>If you do not receive the message <br> Please Check your <span class='text-danger'>Spam</span> or <span class='text-danger'>Junk Mail</span> to Confirm your account</p>":"<p> إذا لم تتلق الرسالة <br> يُرجى التحقق من <span class = 'text-danger'> البريد العشوائي </ span> أو <span class = 'text-danger'> البريد غير المهم </ span> لتأكيد حسابك </ p>",showConfirmButton:!0}),this.showReqCode=!0,this.emailShow=!0,setTimeout((function(){document.getElementById("emailCode").focus()}),1e3),t.startCountdown("restart"),void(t.attrs.disabled=!0);t.attrs.disabled=!1,e.buttonTxt="ar"==this.checkTrans?"خطا بالأرسال":"Submitting failed"}).catch(i=>{a.hide(),clearInterval(o),t.attrs.disabled=!1,e.buttonTxt="ar"==this.checkTrans?"إعادة المحاولة":"Try again",this.hideErr.push(i)})}else this.singleNotification("يرجى ادخال بريد الكتروني صحيح")},finish(e){const t=this;t.buttonTxt="ar"==this.checkTrans?"إعادة أرسال":"Resubmit",e.attrs.disabled=!1,this.emailShow=!1},base64ToBlob(e,t){const i=atob(e),o=new Array(i.length).fill().map((e,t)=>i.charCodeAt(t)),a=new Uint8Array(o);return new Blob([a],{type:t})},openPdfInNewTab(e,t){const i="application/pdf",o=this.base64ToBlob(e,i),a=URL.createObjectURL(o),r=window.open(a,"_blank");if(!r){const e=document.createElement("a");e.href=a,e.download="URCertificate.pdf",e.click()}t.hide(),URL.revokeObjectURL(a)},handleOk(){this.handleSubmit()},handleSubmit(){if(this.emailCode){let e=this.$loading.show({container:this.$refs.newsContainer},{default:this.$createElement("CustomLoader")});v.a.post(S+"user/email/loginWithOTP",{email:this.email,code:this.emailCode,cid:null==this.serviceUrlStore?null:this.serviceUrlStore.cID,lang:this.checkTrans}).then(t=>{200==t.status&&(e.hide(),this.setUserAction(t.data.user),this.setTokenAction(t.data.access_token),this.setRolesAction(t.data.roles),c.a.fire({icon:"success",title:t.data.message,showConfirmButton:!1,timer:1e3}).then(()=>{this.routeUserCondition(t,e)}))}).catch(t=>{e.hide(),this.hideErr.push(t)})}else"ar"==this.checkTrans?this.singleNotification("رمز التحقق مطلوب"):this.singleNotification("Verification code is required")},routeUserCondition(e,t){if(e.data.user.skip_count<=5&&null==e.data.user.phone_num)t.hide(),this.$emit("openSkip","skipPhone");else{if(null!=e.data.user.org)return location.assign("/employee/dashboard");null==this.serviceUrlStore&&0==e.data.user.registered?(t.hide(),location.assign("/sign-up")):null==this.serviceUrlStore&&1==e.data.user.registered?("visitor"==e.data.user.roles[0].name&&e.data.user.email_verified_at,t.hide(),location.assign("/customer/customer-request")):null!=this.serviceUrlStore&&0==e.data.user.registered?(t.hide(),c.a.fire({icon:"warning",title:"ar"==this.checkTrans?"يرجى اكمال عملية التسجيل":"Please complete the registration process",showConfirmButton:!0}).then(()=>{this.$router.push("/sign-up")})):(t.hide(),this.$router.push({name:"verifyAuth",query:{cId:this.serviceUrlStore.cID,cUri:this.serviceUrlStore.cURL,serviceName:this.serviceUrlStore.serviceName}}))}}}},R=$,U=Object(b["a"])(R,k,w,!1,null,null,null),I=U.exports;const x="https://ur.gov.iq/api/";var A={name:"login",metaInfo:{title:"تسجيل الدخول"},components:{PhoneLogin:T,EmailLogin:I,EditPhone:d["a"],EditUserEmail:u["a"]},data(){return{domText:"",loginTelegramFlag:!1,audioSrc:"",audioFileName:null,openModal:"",selectLogin:"",showTextOptionLogin:!0,arrayOfServiceSkipLogin:["10407"],hideErr:[]}},computed:{...Object(s["c"])(["serviceUrlStore","isAuth","token","user"]),showloginOption(){return this.serviceUrlStore,1==this.showTextOptionLogin},showloginOptionVisitor(){if(this.serviceUrlStore)return!!this.arrayOfServiceSkipLogin.includes(this.serviceUrlStore.sID)}},methods:{...Object(s["b"])(["clearServiceUrl","setUserAction"]),skipEmailPhone(e){this.openModal=e,n()("#"+e).modal("show")},callSkipFunc(){let e=this.$loading.show({container:this.$refs.newsContainer},{default:this.$createElement("CustomLoader")});v.a.post(x+"user/skip",{},{headers:{Authorization:"Bearer "+this.token}}).then(t=>{e.hide(),200==t.status&&(this.setUserAction(t.data.data),c.a.fire({icon:"success",title:t.data.message,showConfirmButton:!0}).then(()=>{let e=this.$loading.show({container:this.$refs.newsContainer},{default:this.$createElement("CustomLoader")});if(null!=t.data.data.org)return location.assign("/employee/dashboard");null==this.serviceUrlStore&&0==t.data.data.registered?(e.hide(),location.assign("/sign-up")):null==this.serviceUrlStore&&1==t.data.data.registered?("visitor"==t.data.data.roles[0].name&&t.data.data.email_verified_at,e.hide(),location.assign("/customer/customer-request")):null!=this.serviceUrlStore&&0==t.data.data.registered?(e.hide(),c.a.fire({icon:"warning",title:"ar"==this.$i18n.locale?"يرجى اكمال عملية التسجيل":"Please complete the registration process",showConfirmButton:!0}).then(()=>{location.assign("/sign-up")})):(e.hide(),this.$router.push({name:"verifyAuth",query:{cId:this.serviceUrlStore.cID,cUri:this.serviceUrlStore.cURL,serviceName:this.serviceUrlStore.serviceName}}))}))}).catch(t=>{e.hide(),this.hideErr.push(t)})},loginType(e){this.selectLogin=e;var t=document.getElementsByClassName("login-type");"optFailed"==e?Array.from(t).forEach(e=>{e.style.display="block"}):Array.from(t).forEach(e=>{e.style.display="none"})},showOptionLoginFunction(){this.showTextOptionLogin=!0}},mounted(){this.loginType("phoneLogin")}},O=A,L=(i("54e5"),Object(b["a"])(O,o,a,!1,null,null,null));t["default"]=L.exports},cd27:function(e,t,i){},cf98:function(e,t){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},e163:function(e,t,i){var o=i("1a2d"),a=i("1626"),r=i("7b0b"),n=i("f772"),s=i("e177"),l=n("IE_PROTO"),c=Object,d=c.prototype;e.exports=s?c.getPrototypeOf:function(e){var t=r(e);if(o(t,l))return t[l];var i=t.constructor;return a(i)&&t instanceof i?i.prototype:t instanceof c?d:null}},e177:function(e,t,i){var o=i("d039");e.exports=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},ebb5:function(e,t,i){"use strict";var o,a,r,n=i("4b11"),s=i("83ab"),l=i("da84"),c=i("1626"),d=i("861d"),u=i("1a2d"),h=i("f5df"),p=i("0d51"),m=i("9112"),f=i("cb2d"),v=i("9bf2").f,g=i("3a9b"),_=i("e163"),y=i("d2bb"),C=i("b622"),b=i("90e3"),E=i("69f3"),T=E.enforce,k=E.get,w=l.Int8Array,S=w&&w.prototype,$=l.Uint8ClampedArray,R=$&&$.prototype,U=w&&_(w),I=S&&_(S),x=Object.prototype,A=l.TypeError,O=C("toStringTag"),L=b("TYPED_ARRAY_TAG"),N="TypedArrayConstructor",D=n&&!!y&&"Opera"!==h(l.opera),P=!1,q={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},M=function(e){if(!d(e))return!1;var t=h(e);return"DataView"===t||u(q,t)||u(B,t)},j=function(e){var t=_(e);if(d(t)){var i=k(t);return i&&u(i,N)?i[N]:j(t)}},F=function(e){if(!d(e))return!1;var t=h(e);return u(q,t)||u(B,t)},V=function(e){if(F(e))return e;throw A("Target is not a typed array")},W=function(e){if(c(e)&&(!y||g(U,e)))return e;throw A(p(e)+" is not a typed array constructor")},H=function(e,t,i,o){if(s){if(i)for(var a in q){var r=l[a];if(r&&u(r.prototype,e))try{delete r.prototype[e]}catch(n){try{r.prototype[e]=t}catch(c){}}}I[e]&&!i||f(I,e,i?t:D&&S[e]||t,o)}},Y=function(e,t,i){var o,a;if(s){if(y){if(i)for(o in q)if(a=l[o],a&&u(a,e))try{delete a[e]}catch(r){}if(U[e]&&!i)return;try{return f(U,e,i?t:D&&U[e]||t)}catch(r){}}for(o in q)a=l[o],!a||a[e]&&!i||f(a,e,t)}};for(o in q)a=l[o],r=a&&a.prototype,r?T(r)[N]=a:D=!1;for(o in B)a=l[o],r=a&&a.prototype,r&&(T(r)[N]=a);if((!D||!c(U)||U===Function.prototype)&&(U=function(){throw A("Incorrect invocation")},D))for(o in q)l[o]&&y(l[o],U);if((!D||!I||I===x)&&(I=U.prototype,D))for(o in q)l[o]&&y(l[o].prototype,I);if(D&&_(R)!==I&&y(R,I),s&&!u(I,O))for(o in P=!0,v(I,O,{get:function(){return d(this)?this[L]:void 0}}),q)l[o]&&m(l[o],L,o);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:D,TYPED_ARRAY_TAG:P&&L,aTypedArray:V,aTypedArrayConstructor:W,exportTypedArrayMethod:H,exportTypedArrayStaticMethod:Y,getTypedArrayConstructor:j,isView:M,isTypedArray:F,TypedArray:U,TypedArrayPrototype:I}},f8cd:function(e,t,i){var o=i("5926"),a=RangeError;e.exports=function(e){var t=o(e);if(t<0)throw a("The argument can't be less than 0");return t}}}]);