(self.webpackChunk_webapp_mobile_app_portal=self.webpackChunk_webapp_mobile_app_portal||[]).push([["4223"],{39991:function(e){e.exports=function(){"use strict";function e(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var o=new(function(){function t(){e(this,t),this._prefix="[TikTok desktop app SDK Monitor]:  "}return r(t,[{key:"log",value:function(e){console.log(this._prefix,e)}},{key:"info",value:function(e){console.info(this._prefix,e)}},{key:"warn",value:function(e){console.warn(this._prefix,e)}},{key:"error",value:function(e){console.error(this._prefix,e)}}]),t}()),n=function(){return"undefined"==typeof window},s=function(e,t,r){var a=function(e,t){for(var r=0;r<e.length||r<t.length;++r){var a=0,i=0;if(r<e.length&&(a=parseInt(e[r],10)),r<t.length&&(i=parseInt(t[r],10)),a>i)return 1;if(a<i)return -1}return 0}(e.split("."),r.split("."));return"=="===t&&0===a||">"===t&&a>0||">="===t&&a>=0||"<"===t&&a<0||"<="===t&&a<=0},l=new(function(){function t(){e(this,t),this._methodRuleMap={}}return r(t,[{key:"registerMethodRules",value:function(e){var t=e.map,r=void 0===t?"":t,a=e.target;r?this._methodRuleMap[r]=void 0===a?[]:a:o.error("register method rules error")}},{key:"getRuntimeOS",value:function(){if(n())return"ssr";var e="Win32"===(null==navigator?void 0:navigator.platform)||"Windows"===(null==navigator?void 0:navigator.platform),t="Mac68K"===(null==navigator?void 0:navigator.platform)||"MacPPC"===(null==navigator?void 0:navigator.platform)||"Macintosh"===(null==navigator?void 0:navigator.platform)||"MacIntel"===(null==navigator?void 0:navigator.platform),r="X11"===(null==navigator?void 0:navigator.platform)&&!e&&!t,a=String(null==navigator?void 0:navigator.platform).indexOf("Linux")>-1;return t?"mac":r?"unix":a?"linux":e?"windows":"unknown"}},{key:"getRuntimeVersion",value:function(){var e,t,r;return n()?(o.error("can't get client version in ssr"),""):(null==(r=null==(t=null==(e=null==window?void 0:window.TTE_ENV)?void 0:e.initPageStore)?void 0:t.page)?void 0:r.version)||""}},{key:"checkOS",value:function(e){return!e||"*"===e||this.getRuntimeOS()===e}},{key:"checkMethodAvailable",value:function(e){var t,r,a;return!!this.checkInClient()&&void 0!==(null==(a=null==(r=null==(t=null==window?void 0:window.TTE_ENV)?void 0:t.bridge)?void 0:r.EVENTS)?void 0:a.TO_MAIN_EVENT_TYPES[e])}},{key:"canIUse",value:function(e){return{code:0,data:{isAvailable:this.checkMethodAvailable(e)}}}},{key:"checkVersion",value:function(e){var t,r,i,o,n,l,d;return!e||(t=this.getRuntimeVersion(),n=void 0===(o=(r=e.split("-"),i=function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,i,o=[],n=!0,s=!1;try{for(r=r.call(e);!(n=(a=r.next()).done)&&(o.push(a.value),o.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(s)throw i}}return o}}(r,2)||a(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0])?"":o,d=void 0===(l=i[1])?"":l,!n&&!d||(n?d?s(t,">=",n)&&s(t,"<=",d):s(t,">=",n):s(t,"<=",d)))}},{key:"checkDetail",value:function(e){if(!e||0===e.length)return!0;var t,r=!1,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,n=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw n}}}}(e);try{for(i.s();!(t=i.n()).done;){var o=t.value.os;if(r=this.checkOS(o))break}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"checkRule",value:function(e){var t=e.target;return!e||!!this.checkDetail(void 0===t?[]:t)}},{key:"on",value:function(e,t){return this.checkInClient()?window.TTE_ENV.bridge.on(e,t):(o.warn("turn on listening to ".concat(e," failed, env is not in client.")),!1)}},{key:"off",value:function(e,t){return this.checkInClient()?window.TTE_ENV.bridge.off(e,t):(o.warn("turn off listening to ".concat(e," failed, env is not in client.")),!1)}},{key:"checkInClient",value:function(){var e;return!n()&&void 0!==(null==(e=null==window?void 0:window.TTE_ENV)?void 0:e.bridge)}},{key:"call",value:function(e){var t=this,r=e.params,a=void 0===r?{}:r,i=e.method,n=e.rule,s=e.transParameters,l=void 0!==s&&s;return new Promise(function(e){var r={code:-9,data:null,msg:"Something went wrong. maybe polyfill."};try{if(!t.checkInClient()){var s="WARN:[".concat(i,"]The current environment is not inside the client.");return r.code=-2,r.msg=s,o.warn(s),void e(r)}if(!t.checkMethodAvailable(i)){var d="WARN: [".concat(i,"]The current system doesn't support this method.");return r.code=-3,r.msg=d,o.warn(d),void e(r)}if(!t.checkRule(n)){var u="WARN: [".concat(i,"]The method invocation environment does not meet the rules.");return r.code=-3,r.msg=u,o.warn(u),void e(r)}}catch(t){var p="Bridge SDK Inner Error: ".concat(i,"-{").concat(JSON.stringify(a),"}. ").concat(t.message," | ").concat(t.stack);return o.error(p),r.msg=p,r.code=-5,void e(r)}window.TTE_ENV.bridge.invoke(i,l?a:{data:a}).then(function(t){var a,i,o;void 0!==(null==t?void 0:t._to_sdk)?(r.code=null!=(a=t._to_sdk.code)?a:r.code,r.data=null!=(i=t.data)?i:null,r.msg=null!=(o=t._to_sdk.msg)?o:"success"):(r.code=0,r.data=t,r.msg="success"),e(r)}).catch(function(t){var n="Bridge SDK Execute Failed: ".concat(i,"-{").concat(JSON.stringify(a),"}}. ").concat(t.message," | ").concat(t.stack);r.code=-1,r.msg=t.message,o.error(n),e(r)})})}}]),t}());function d(e){Object.keys(e).forEach(function(t){var r,a=(null==(r=e[t])?void 0:r.rule)||{};l.registerMethodRules(a)})}var u={target:[{os:"*"}],map:"app.getVersion"};function p(){return l.call({rule:u,method:"GET_VERSION"})}p.rule=u;var c={target:[{os:"*"}],map:"app.setAlwaysOnTop"};function _(e){return l.call({rule:c,method:"SET_ALWAYS_ON_TOP",params:e,transParameters:!0})}_.rule=c;var h={target:[{os:"*"}],map:"app.changeToOriginalMode"};function m(){return l.call({rule:h,method:"CHANGE_TO_ORIGINAL_MODE"})}m.rule=h;var v={target:[{os:"*"}],map:"app.changeToSmallMode"};function g(){return l.call({rule:v,method:"CHANGE_TO_SMALL_MODE"})}g.rule=v;var f={target:[{os:"*"}],map:"app.isAlwaysOnTop"};function y(){return l.call({rule:f,method:"IS_ALWAYS_ON_TOP"})}y.rule=f;var P={target:[{os:"*"}],map:"app.mainWindowMoveTop"};function w(){return l.call({rule:P,method:"MAIN_WINDOW_MOVE_TOP"})}w.rule=P;var T={target:[{os:"*"}],map:"app.minimize"};function S(){return l.call({rule:T,method:"WINDOW_MIN"})}S.rule=T;var E={target:[{os:"*"}],map:"app.handlePageReady"};function A(){return l.call({rule:E,method:"PAGE_READY"})}A.rule=E;var b={target:[{os:"*"}],map:"app.maximize"};function k(){return l.call({rule:b,method:"WINDOW_MAX"})}k.rule=b;var I={target:[{os:"*"}],map:"app.canGoBack"};function R(){return l.call({rule:I,method:"CAN_GO_BACK"})}R.rule=I;var M={target:[{os:"*"}],map:"app.clearCookie"};function C(){return l.call({rule:M,method:"CLEAR_COOKIE"})}C.rule=M;var V={target:[{os:"*"}],map:"app.getWid"};function O(){return l.call({rule:V,method:"GET_WID"})}O.rule=V;var F={target:[{os:"*"}],map:"app.closeParent"};function x(){return l.call({rule:F,method:"CLOSE_PARENT"})}x.rule=F;var D={target:[{os:"*"}],map:"app.closeWindow"};function W(){return l.call({rule:D,method:"WINDOW_CLOSE"})}W.rule=D;var L={target:[{os:"*"}],map:"app.getAllClientLog"};function N(){return l.call({rule:L,method:"GET_ALL_CLIENT_LOG"})}N.rule=L;var G={target:[{os:"*"}],map:"app.getAppConfigItem"};function j(e){return l.call({rule:G,method:"GET_APP_CONFIG_ITEM",params:e})}j.rule=G;var U={target:[{os:"*"}],map:"app.goBack"};function Q(){return l.call({rule:U,method:"GO_BACK"})}Q.rule=U;var B={target:[{os:"*"}],map:"app.getPageStore"};function Y(){return l.call({rule:B,method:"GET_PAGE_STORE"})}Y.rule=B;var H={target:[{os:"*"}],map:"app.getSettings"};function K(){return l.call({rule:H,method:"GET_SETTINGS"})}K.rule=H;var z={target:[{os:"*"}],map:"app.isFull"};function q(){return l.call({rule:z,method:"WINDOW_IS_FULL"})}q.rule=z;var J={target:[{os:"*"}],map:"app.openWallpaperWindow"};function Z(){return l.call({rule:J,method:"OPEN_WALLPAPER_WINDOW"})}Z.rule=J;var $={target:[{os:"*"}],map:"app.getChannelId"};function X(){return l.call({rule:$,method:"GET_CHANNEL_ID"})}X.rule=$;var ee={target:[{os:"*"}],map:"app.reload"};function et(){return l.call({rule:ee,method:"RELOAD"})}et.rule=ee;var er={target:[{os:"mac"}],map:"app.setFullScreenable"};function ea(e){return l.call({rule:er,method:"SET_FULL_SCREENABLE",params:e,transParameters:!0})}ea.rule=er;var ei={target:[{os:"*"}],map:"app.getAllWindowData"};function eo(){return l.call({rule:ei,method:"GET_ALL_WINDOW_DATA"})}eo.rule=ei;var en={target:[{os:"*"}],map:"app.reloadWindowFromId"};function es(){return l.call({rule:en,method:"RELOAD_FROM_ID"})}es.rule=en;var el={target:[{os:"*"}],map:"app.reportStat"};function ed(e){return l.call({rule:el,method:"REPORT_STAT",params:e,transParameters:!0})}ed.rule=el;var eu={target:[{os:"*"}],map:"app.setAppConfigItem"};function ep(e){return l.call({rule:eu,method:"SET_APP_CONFIG_ITEM",params:e})}ep.rule=eu;var ec={target:[{os:"*"}],map:"app.setAutoStart"};function e_(e){return l.call({rule:ec,method:"SET_AUTO_START",params:e})}e_.rule=ec;var eh={target:[{os:"*"}],map:"app.setCloseToTray"};function em(e){return l.call({rule:eh,method:"SET_CLOSE_TO_TRAY",params:e})}em.rule=eh;var ev={target:[{os:"*"}],map:"app.setMiniMizeToTray"};function eg(e){return l.call({rule:ev,method:"SET_MINIMIZE_TO_TRAY",params:e})}eg.rule=ev;var ef={target:[{os:"*"}],map:"app.showAbout"};function ey(e){return l.call({rule:ef,method:"WINDOW_SHOW_ABOUT",params:e})}ey.rule=ef;var eP={target:[{os:"*"}],map:"app.syncLoginState"};function ew(e){return l.call({rule:eP,method:"SYNC_LOGIN_STATE",params:e,transParameters:!0})}ew.rule=eP;var eT={target:[{os:"*"}],map:"app.themeChange"};function eS(e){return l.call({rule:eT,method:"THEME_CHANGE",params:e})}eS.rule=eT;var eE={target:[{os:"*"}],map:"app.getAllDisplays"};function eA(){return l.call({rule:eE,method:"GET_ALL_DISPLAYS"})}eA.rule=eE;var eb={target:[{os:"*"}],map:"app.getPrimaryDisplay"};function ek(){return l.call({rule:eb,method:"GET_PRIMARY_DISPLAY"})}ek.rule=eb;var eI={target:[{os:"*"}],map:"app.navigationGoBack"};function eR(){return l.call({rule:eI,method:"NAVIGATION_GO_BACK"})}eR.rule=eI;var eM={target:[{os:"windows"}],map:"app.getAutoStart"};function eC(){return l.call({rule:eM,method:"GET_AUTO_START"})}eC.rule=eM;var eV={target:[{os:"*"}],map:"app.showUpdateModal"};function eO(){return l.call({rule:eV,method:"SHOW_UPDATE_MODAL"})}eO.rule=eV;var eF={target:[{os:"*"}],map:"app.getIsUpdatePackageReady"};function ex(){return l.call({rule:eF,method:"GET_IS_UPDATE_PACKAGE_READY"})}ex.rule=eF;var eD={target:[{os:"*"}],map:"app.getClientUpdateInfo"};function eW(){return l.call({rule:eD,method:"GET_CLIENT_UPDATE_INFO"})}eW.rule=eD;var eL={target:[{os:"*"}],map:"app.quitUpdateTip"};function eN(){return l.call({rule:eL,method:"QUIT_UPDATE_TIP"})}eN.rule=eL;var eG={target:[{os:"mac"}],map:"app.getMediaAccessStatus"};function ej(e){return l.call({rule:eG,method:"GET_MEDIA_ACCESS_STATUS",params:e,transParameters:!0})}ej.rule=eG;var eU={target:[{os:"mac"}],map:"app.askForMediaAccess"};function eQ(e){return l.call({rule:eU,method:"ASK_FOR_MEDIA_ACCESS",params:e,transParameters:!0})}eQ.rule=eU;var eB={target:[{os:"mac"}],map:"app.getIsMas"};function eY(){return l.call({rule:eB,method:"GET_IS_MAS"})}eY.rule=eB;var eH={target:[{os:"*"}],map:"app.getIsFrontShow"};function eK(){return l.call({rule:eH,method:"GET_IS_FRONT_SHOW"})}eK.rule=eH;var ez={target:[{os:"*"}],map:"app.downloadWallpaper"};function eq(e){return l.call({rule:ez,method:"DOWNLOAD_WALLPAPER",params:e,transParameters:!0})}eq.rule=ez;var eJ={target:[{os:"*"}],map:"app.getStoreItem"};function eZ(e){return l.call({rule:eJ,method:"GET_STORE_ITEM",params:e,transParameters:!0})}eZ.rule=eJ;var e$={target:[{os:"*"}],map:"app.setStoreItem"};function eX(e){return l.call({rule:e$,method:"SET_STORE_ITEM",params:e,transParameters:!0})}eX.rule=e$;var e0={target:[{os:"*"}],map:"app.getMetrics"};function e1(){return l.call({rule:e0,method:"GET_METRICS"})}e1.rule=e0;var e7={target:[{os:"*"}],map:"app.printFirstFeedShow"};function e2(e){return l.call({rule:e7,method:"printFirstFeedShow",params:e,transParameters:!0})}e2.rule=e7;var e5={target:[{os:"windows"}],map:"app.getHardwareDecodeState"};function e3(){return l.call({rule:e5,method:"getHardwareDecodeState"})}e3.rule=e5;var e6={target:[{os:"*"}],map:"app.isTopWebview"};function e4(){return l.call({rule:e6,method:"isTopWebview"})}e4.rule=e6;var e9={target:[{os:"*"}],map:"app.getVolumeInfo"};function e8(){return l.call({rule:e9,method:"getVolumeInfo"})}e8.rule=e9;var te={target:[{os:"*"}],map:"app.openInternalBrowser"};function tt(e){return l.call({rule:te,method:"openInternalBrowser",params:e,transParameters:!0})}tt.rule=te;var tr={target:[{os:"*"}],map:"app.mainWindowShowView"};function ta(){return l.call({rule:tr,method:"mainWindowShowView"})}ta.rule=tr;var ti={target:[{os:"*"}],map:"app.langChange"};function to(e){return l.call({rule:ti,method:"LANG_CHANGE",params:e})}to.rule=ti;var tn={target:[{os:"*"}],map:"app.downloadVideo"};function ts(e){return l.call({rule:tn,method:"DOWNLOAD_VIDEO",params:e})}ts.rule=tn;var tl={getVersion:p,setAlwaysOnTop:_,changeToOriginalMode:m,changeToSmallMode:g,isAlwaysOnTop:y,mainWindowMoveTop:w,minimize:S,handlePageReady:A,maximize:k,canGoBack:R,clearCookie:C,getWid:O,closeParent:x,closeWindow:W,getAllClientLog:N,getAppConfigItem:j,goBack:Q,getPageStore:Y,getSettings:K,isFull:q,openWallpaperWindow:Z,getChannelId:X,reload:et,setFullScreenable:ea,getAllWindowData:eo,reloadWindowFromId:es,reportStat:ed,setAppConfigItem:ep,setAutoStart:e_,setCloseToTray:em,setMiniMizeToTray:eg,showAbout:ey,syncLoginState:ew,themeChange:eS,getAllDisplays:eA,getPrimaryDisplay:ek,navigationGoBack:eR,getAutoStart:eC,showUpdateModal:eO,getIsUpdatePackageReady:ex,getClientUpdateInfo:eW,quitUpdateTip:eN,getMediaAccessStatus:ej,askForMediaAccess:eQ,getIsMas:eY,getIsFrontShow:eK,downloadWallpaper:eq,getStoreItem:eZ,setStoreItem:eX,getMetrics:e1,printFirstFeedShow:e2,getHardwareDecodeState:e3,isTopWebview:e4,getVolumeInfo:e8,openInternalBrowser:tt,mainWindowShowView:ta,langChange:to,downloadVideo:ts};d(tl);var td={target:[{os:"*"}],map:"user.getUserUniqueId"};function tu(){return l.call({rule:td,method:"GET_USER_UNIQUE_ID"})}tu.rule=td;var tp={target:[{os:"*"}],map:"user.getCsrInitialData"};function tc(){return l.call({rule:tp,method:"getCsrInitialData"})}tc.rule=tp;var t_={getUserUniqueId:tu,getCsrInitialData:tc};return d(t_),{app:tl,user:t_,util:{canIUse:l.canIUse.bind(l),isClient:l.checkInClient,sdkVersion:"0.0.0"},on:l.on.bind(l),off:l.off.bind(l)}}()},63147:function(e,t,r){"use strict";r.d(t,{mJ:()=>s,q$:()=>l});var a=r(61714),i=r(31678),o=r(32734),n=r(69031);function s(){var{enable:e=!0,enableHeadComponent:t,enableInlineScript:r,enableUseSlardarPageViewHook:i}=(0,a.useContext)(o.JW);return{enable:e,enableHeadComponent:null!=t?t:e,enableInlineScript:null!=r?r:e,enableUseSlardarPageViewHook:null!=i?i:e}}function l(e){var{pid:t}=e,r=(0,i.fz)(n.nF),{enableUseSlardarPageViewHook:o}=s();(0,a.useEffect)(()=>{o&&(r.config({pid:t}),r.start(t))},[t,r,o])}},17674:function(e,t,r){"use strict";r.d(t,{u8:()=>O,nV:()=>F,k0:()=>C,mn:()=>V});var a=r(35279),i=r(85370),o=r(57421),n=r(44251),s=r(61714),l=r(95602),d=r(31678),u=r(41999),p=r(24889),c=r(85275),_=r(22554),h=r(37455),m=r(66193),v=r(15093),g=r(41331),f=e=>{var t,{page_name:r,enter_from:i,is_downgrade:n,object_id:s,object_type:l,[c.Zw]:d}=e,p=(0,o._)(e,["page_name","enter_from","is_downgrade","object_id","object_type",c.Zw].map(u._)),m=(0,h.pm)();return(0,a._)({previous_page:_.W.getPreviousInfo(r),page_name:r,enter_from:i,page_url:window.location.href,userAgent:navigator.userAgent,keyword:m.keyword,sub_keyword:m.sub_keyword,user_type_alias:window.navigator.userAgent.match(/google/gi)?"search":"user",domain_name:null!=(t=window.location.host)?t:"unknown",page_path:window.location.pathname},p)},y=(e,t)=>{var r,i,o,n,s,{user:l,region:d,wid:u,language:g}=e,{page_name:f,is_downgrade:y,object_id:P,object_type:w,utm_medium:T,utm_campaign:S,utm_source:E,embed_source:A="",vidab:b,seo_vidab:k,[c.Zw]:I,source:R}=t,M=(0,p.Z)(_.W.initDimensionalData,{utm_medium:T,utm_campaign:S,utm_source:E}),C=(0,a._)({release:"1.0.0.727",user_is_login:+!!l,priority_region:null==l?void 0:l.region,landing_page:_.W.getLandingPage(f),is_kids_mode:+(null!=l&&!!l.ftcUser),region:d,extraData:function(e,t){var r,a,i,o,n,s,l=(0,h.St)(m.lF,"");if(l&&"{}"!==l)return l;var d=(0,h.pm)()||{},u={object_id:null!=(r=d.object_id)?r:d.referer_video_id,object_type:d.object_type,share_device:null!=(i=null!=(a=d.share_device)?a:d.sender_device)?i:"",share_web_id:null!=(n=null!=(o=d.share_web_id)?o:d.sender_web_id)?n:"",share_user_id:null!=(s=d.share_user_id)?s:""};e===v.x.Amp||e===v.x.Embed?(u.object_type="video",u.object_id=d.referer_video_id):e===v.x.Reflow||e===v.x.WebApp?(u.object_type=null==t?void 0:t.object_type,u.object_id=null==t?void 0:t.object_id):e===v.x.Push&&(u.push_type=d.push_type),Object.keys(u).forEach(e=>{u[e]||delete u[e]});var p=JSON.stringify(u);return(0,h.D9)(m.lF,p),p}(M.launch_mode,{object_id:P,object_type:w}),is_downgrade:y,session_id:_.W.getSessionId(u),embed_source:A,app_language:g,is_sharing:0,vidab:b,seo_vidab:k,[c.Zw]:I,max_touch_points:null==(r=navigator)?void 0:r.maxTouchPoints,network_downlink:null==(i=navigator.connection)?void 0:i.downlink,network_rtt:null==(o=navigator.connection)?void 0:o.rtt,network_speed_effective_type:null==(n=navigator.connection)?void 0:n.effectiveType,network_connection_type:null==(s=navigator.connection)?void 0:s.type},function(){var e,t=new URLSearchParams(null==(e=window.location)?void 0:e.search),r=!!t.get("gclid"),a={},i="webapp-recharge-google_ads_info";try{if(r)a={utm_gclid:t.get("gclid"),utm_original_url:window.location.href,utm_medium:t.get("utm_medium"),utm_media_source:t.get("utm_source")||t.get("utm_media_source"),utm_campaign_id:t.get("campaign_id")||t.get("campaignid"),utm_adset_id:t.get("adset_id")||t.get("adgroupid"),utm_ad_id:t.get("ad_id")||t.get("creative"),utm_channel:t.get("channel")||t.get("network"),utm_keyword:t.get("keyword"),utm_placement:t.get("placement"),utm_match_type:t.get("match_type")},localStorage.setItem(i,JSON.stringify({value:a,expiryDate:new Date().getTime()+2592e6}));else{var o=JSON.parse(localStorage.getItem(i)||"{}");o.expiryDate&&new Date().getTime()<o.expiryDate&&(a=o.value)}}catch(e){console.log(e)}return a}(),M);return R&&(C.source=R),C},P=(e,t,r)=>{var o,{user:n,region:s,wid:l,domains:d,odinId:u,vgeo:p,abTestVersion:c}=e,h=f(t),m=y(e,t);_.W.config({initConfig:(0,a._)({channel_domain:d.tea,ab_channel_domain:d.libraWebSDK,channel_type:d.teaChannelType,channel:d.teaChannel,id:1988},r),commonHeaderConfig:{region:s,user_id:null!=(o=null==n?void 0:n.uid)?o:u,user_is_login:!!n,user_unique_id:l,user_type:12,device_id:l,"header.custom":m},commonEventParams:(0,i._)((0,a._)({},h),{data_collection_enabled:+!!(0,g.BY)(p,!!n)}),abTestVersion:c})},w=r(82471),T=r(83306),S=r(64937),E=r(96055),A=r(70367),b=r(74878),k=r(77272),I=r(68933),R=r(54342),M=r(24099);function C(e,t){var r,n=(0,A.m7)((0,b.L)(()=>["region","user","wid","abTestVersion","language","odinId"],[])),d=(0,A.m7)((0,k.h)(()=>["domains","vgeo"],[])),{abTestVersion:u,user:p}=n,c=(0,E.F7)(u,null!=(r=null==p?void 0:p.uid)?r:"");!function(e,t,r){var a,i=t(),{initConfig:n={}}=i,d=(0,o._)(i,["initConfig"]);(0,s.useEffect)(()=>{d&&!d.skip_init&&P(e,d,n)},[...r]),a=(0,l.k6)(),(0,s.useEffect)(()=>{var e=null==a?void 0:a.listen(e=>{_.W.resetStayDuration(e.pathname,e.pathname,window.location.href)});return()=>{null==e||e()}},[])}((0,a._)({},d,n),()=>(0,i._)((0,a._)({},e()),{is_downgrade:(0,I.Wn)(),is_non_personalized:c?"1":"0"}),t)}function V(e){var t,r,{eParams:i}=e,{botType:d,webIdCreatedTime:u}=null!=(t=(0,b.L)(()=>["botType","webIdCreatedTime"],[]))?t:{},{isMobile:p}=null!=(r=(0,k.h)(()=>["isMobile"],[]))?r:{},{search:c,pathname:_}=(0,l.TH)(),h=(0,n.parse)(c);return(0,s.useCallback)(()=>{var e,t=i||{},{is_from_webapp:r}=t,n=(0,o._)(t,["is_from_webapp"]),s=h.sender_web_id?{sender_device:h.sender_device,sender_web_id:h.sender_web_id}:{},l=p||(0,R.oC)(_)||(e="#".concat(location.pathname),/^#\/@.*\/video\/\d+$/.test(e))||location.search.indexOf("item_id")>-1?(0,a._)({is_from_webapp:r||["v1","v2","v3"].indexOf(h.is_from_webapp)>-1?h.is_from_webapp:"0"},s):{},c={browser_height:"undefined"!=typeof window?window.innerHeight:0,browser_width:"undefined"!=typeof window?window.innerWidth:0},m=(0,a._)({bot_type:null!=d?d:"others",keyword:h.keyword,sub_keyword:h.sub_keyword,duration:performance.now(),webIdCreatedTime:u},n,l,c);w._.handlePageView(m)},[i,h.sender_web_id,h.sender_device,h.is_from_webapp,p,h.keyword,h.sub_keyword,_,d])}function O(e){var{pathname:t}=(0,l.TH)(),r=(0,d.fz)(T.KF);(0,s.useEffect)(()=>{var e=(0,M.BB)(t);r.handleRouteChange(t),r.updateCurrentPage(e),r.setCurrentPageReport(!1),r.resetExist(),r.reportVideoAdditionStart({startTime:Date.now(),situation:T.KU.AdditionFirstLoad})},[r,e,t])}function F(){var e=(0,d.fz)(S.ec);(0,s.useEffect)(()=>{e.reset()},[e])}},85275:function(e,t,r){"use strict";r.d(t,{V9:()=>a,Zw:()=>i});var a="webapp.a-b",i="b_c"},83306:function(e,t,r){"use strict";r.d(t,{KF:()=>p,KU:()=>u});var a,i=r(74856),o=r(39991),n=r.n(o),s=r(22554),l=["homepage_hot","homepage_hot_h5","homepage_following","others_homepage","challenge","single_song","video_detail","video_detail_h5"],d=["homepage_hot","homepage_follow","others_homepage","challenge","video_detail","single_song","explore_page"],u=((a={}).BrowserModeNext="browser_mode_next",a.BrowserModePrev="browser_mode_prev",a.EnterCreatorMode="enter_creator_mode",a.ExitCreatorMode="exit_creator_mode",a.ClickCreatorTabVideo="click_creator_video",a.OneColumnScrollNext="one_column_scroll_next",a.OneColumnScrollPrev="one_column_scroll_prev",a.OpenBrowserMode="open_browser_mode",a.AdditionFirstLoad="addition_first_load",a.SwiperSlideNext="swiper_slide_next",a.SwiperSlidePrev="swiper_slide_prev",a.ThreeColumnUserHover="three_column_user_hover",a.ThreeColumnUserTouch="three_column_user_touch",a.VideoDatailSelect="video_detail_select",a);class p{constructor(){this.additionQueue=[],this.existedQueue=[],this.firstLoadReport=!1,this.shouldFirstLoadReportSkip=!1,this.firstFrameReport=!1,this.currentPageReport=!1,this.currentPage="",this.reportedCanPlayVideoSource="",this.reportedPlayingVideoSource="",this.reportedScrollPrevIndex=-1,this.reportedScrollCurrIndex=-1,this.slideTransitionExsitedQueue=[],this.emit=(e,t)=>{try{s.W.event(e,t)}catch(e){console.error("Video Scene Evnet Tea Report Error: ".concat(e))}},this.reportVideoPageFCP=e=>{this.emit("page_content_paint",e)},this.reportVideoFirstScreen=e=>{var{endTime:t,videoSource:r}=e;if(!this.firstLoadReport){if(this.firstLoadReport=!0,this.currentPageReport=!0,!this.checkIfCanReportFirstPlay()||this.shouldFirstLoadReportSkip)return;var a,i,o,n,s={duration:Math.round(t-(performance.timeOrigin||performance.timing.navigationStart)),to_page:this.currentPage,can_use_hevc:+!!((!window||window.MediaSource)&&((null==(a=window)?void 0:a.MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"'))||(null==(i=window)?void 0:i.MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"'))||(null==(o=window)?void 0:o.MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"'))||(null==(n=window)?void 0:n.MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))))};this.emit("first_screen_video",s),this.resetAddition(),this.setReportVideoSource(r,0),this.reportClientEvent()}},this.reportClientEvent=()=>{if(n()){var e,t;null==n()||null==(t=n().app)||null==(e=t.printFirstFeedShow)||e.call(t,{info:{page_name:this.currentPage}})}},this.reportVideoFirstFrame=e=>{if(e&&!this.firstFrameReport&&(this.firstFrameReport=!0,this.checkIfCanReportFirstFrame())){var t=performance.timeOrigin||performance.timing.navigationStart,r={duration:Math.round(Date.now()-t),to_page:this.currentPage,page_name:this.currentPage};this.emit("first_frame_video",r)}},this.reportVideoAddition=e=>{var t=this.additionQueue[0],{endTime:r,videoSource:a}=e;if(!(this.isEmptyEvent(t)||this.checkIfHasReported(a,0))){var{startTime:i=0,situation:o="",from_page:n=""}=t,s=this.currentPage;this.currentPageReport||n===s||(this.currentPageReport=!0,this.emit("interact_additional_video_end",{situation:o,from_page:n,to_page:s,duration:r-i}),this.resetAddition(),this.setReportVideoSource(a,0))}},this.reportVideoInteract=e=>{var t=this.existedQueue[0]||{},{startTime:r=0,situation:a="",from_page:i=""}=t,{endTime:o,videoSource:n}=e;if(!(this.isEmptyEvent(t)||this.checkIfHasReported(n,1)&&"open_browser_mode"!==a)){var s=this.currentPage;this.emit("interact_existed_video_end",{situation:a,from_page:i,to_page:s,duration:o-r}),this.resetExist(),this.setReportVideoSource(n,1)}},this.reportVideoAdditionStart=e=>{var{situation:t,startTime:r}=e;this.currentPageReport=!1,this.additionQueue=[{startTime:r,situation:t,from_page:this.currentPage}]},this.reportVideoInteractStart=e=>{var t=this.existedQueue[0];if(!this.isEmptyEvent(t)){var r,{situation:a=""}=t;if((null!=(r=e.situation)?r:"").indexOf("one_column_scroll")>-1&&a.indexOf("browser_mode")>-1)return}var{startTime:i,situation:o,currVideoIndex:n,prevVideoIndex:s,enterMethod:l}=e;if(!n||!(n>0)||n!==this.reportedScrollCurrIndex||s!==this.reportedScrollPrevIndex){var d=this.currentPage;this.existedQueue=[{startTime:i,situation:o,from_page:d}];var u={situation:o,from_page:this.currentPage,enter_method:l};this.emit("interact_existed_video_start",u),this.reportedScrollCurrIndex=null!=n?n:-1,this.reportedScrollPrevIndex=null!=s?s:-1}},this.reportSlideTransitionStart=e=>{var{from_page:t,start_time:r,current_index:a}=e;this.slideTransitionExsitedQueue=[{from_page:t,start_time:r,current_index:a}]},this.reportSlideTransitionEnd=e=>{var t=this.slideTransitionExsitedQueue[0]||{},{from_page:r,start_time:a,current_index:i}=t,{from_page:o,end_time:n,current_index:s}=e;this.isEmptyEvent(t)||o!==r||s===i||(this.emit("swiper_slide_transition_end",{from_page:o,situation:s-i>0?"swiper_slide_next":"swiper_slide_prev",duration:n-a}),this.slideTransitionExsitedQueue=[])},this.updateCurrentPage=e=>{this.currentPage=e},this.setReportVideoSource=(e,t)=>{0===t?this.reportedCanPlayVideoSource=e:this.reportedPlayingVideoSource=e},this.setCurrentPageReport=e=>{this.currentPageReport=e},this.getCurrentPageReport=()=>this.currentPageReport,this.getFirstLoadReport=()=>this.firstLoadReport,this.getFirstFrameReport=()=>this.firstFrameReport,this.isEmptyEvent=e=>!e||0===Object.keys(e).length,this.checkIfCanReportFirstPlay=()=>l.indexOf(this.currentPage)>-1&&performance,this.checkIfCanReportFirstFrame=()=>d.indexOf(this.currentPage)>-1&&performance,this.checkIfHasReported=(e,t)=>(0===t?this.reportedCanPlayVideoSource:this.reportedPlayingVideoSource)===e,this.resetAddition=()=>this.additionQueue=[],this.resetExist=()=>this.existedQueue=[],this.handleUserChangeVideoOrPlayMode=()=>{this.shouldFirstLoadReportSkip=!0},this.handleRouteChange=e=>{this.currentPage&&e&&(this.shouldFirstLoadReportSkip=!0)}}}p=function(e,t,r,a){var i,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(o<3?i(n):o>3?i(t,r,n):i(t,r))||n);return o>3&&n&&Object.defineProperty(t,r,n),n}([(0,i.GS)({name:"VideoExperienceReport@tiktok/tea-events"})],p)},64937:function(e,t,r){"use strict";r.d(t,{NB:()=>v,PO:()=>g,ec:()=>T});var a,i=r(35279),o=r(85370),n=r(44251),s=r(74856),l=r(22554),d=r(37455),u=r(66193),p=r(49173),c=r(93758),_=r(48419),h=r(80528),m=r(42139),v=((a={}).Play="video_play",a.Finish="video_play_finish",a.Stop="play_time",a.SchedulePlay="schedule_video_play",a.ScheduleFinish="schedule_video_play_finish",a.ScheduleStop="schedule_video_play_time",a.PreviewVideoPlay="preview_video_play",a.PreviewVideoFinish="preview_video_play_finish",a.PreviewVideoStop="preview_play_time",a.Pause="video_pause",a.Resume="video_resume",a),g=e=>{var{video_width:t,video_height:r,video_duration:a}=e;return{video_width:t,video_height:r,video_duration:a}},f=e=>{var{caption_options:t,caption_mode:r,caption_language:a,always_translate_post_mode:i,do_not_translate_mode:o,translate_into_mode:n,see_original_show:s,see_translation_show:l}=e;return{caption_options:t,caption_mode:r,caption_language:a,always_translate_post_mode:i,do_not_translate_mode:o,translate_into_mode:n,see_original_show:s,see_translation_show:l}},y=e=>{var{video_freshness:t,video_duration:r,video_like_history:a,video_vv_history:i,video_share_history:o,video_comment_history:n,video_favorite_history:s,video_resolution:l,video_is_portrait:d,video_100k_vv:u,video_creator_bluev:p,video_creator_1k_follower:c,video_creator_10k_follower:_,video_creator_100k_follower:h,video_next_info:m}=e;return{video_freshness:t,video_duration:r,video_like_history:a,video_vv_history:i,video_share_history:o,video_comment_history:n,video_favorite_history:s,video_resolution:l,video_is_portrait:d,video_100k_vv:u,video_creator_bluev:p,video_creator_1k_follower:c,video_creator_10k_follower:_,video_creator_100k_follower:h,video_next_info:m}},P=e=>({duration:e.video_duration,like_cnt:e.video_like_history,comment_cnt:e.video_comment_history,share_cnt:e.video_share_history,play_cnt:e.video_vv_history,collect_cnt:e.video_favorite_history,video_next_info:e.video_next_info}),w={is2sPlayReported:!1,is6sPlayReported:!1,is15sPlayReported:!1,isFirstQuartilePlayReported:!1,isMidPointPlayReported:!1,isThirdQuartilePlayReported:!1,playOrder:0,video_length:0,is1sViewableImpressionReported:!1,is2sViewableImpressionReported:!1,is6sViewableImpressionReported:!1,is15sViewableImpressionReported:!1};class T{getPlayModeForTea(e){var t=p.Ye.Others;switch(e){case p.jl.BrowserMode:t=p.Ye.BrowserMode;break;case p.jl.ImmersivePlayer:t=p.Ye.ImmersivePlayer;break;case p.jl.OneColumn:t=this.isVideoDetail?p.Ye.Others:p.Ye.OneColumn;break;case p.jl.ThreeColumn:t=this.isThreeColumnAuto?p.Ye.ThreeColumnAuto:p.Ye.ThreeColumnTrigger;break;case p.jl.VideoDetail:t=p.Ye.VideoDetail;break;case p.jl.Pip:t=p.Ye.Pip;break;case p.jl.FullscreenMode:t=p.Ye.FullscreenMode;break;case p.jl.CreatorTab:t=p.Ye.ThreeColumnTrigger;break;case p.jl.MiniPlayer:t=p.Ye.MiniPlayer;break;case p.jl.TiktokStories:t=p.Ye.TiktokStories}return t}setStartPlay(){this.startPlayTimestamp=Date.now(),this.currentCycleStartTimestamp=this.startPlayTimestamp,this.videoFocusTime=0}playFinishEvent(e){var{isFirstPlayEndReported:t,enterMethod:r,backendSourceEventTracking:a}=this,{itemId:o,authorId:n,isScheduled:s,autoplayStatus:d=0,searchId:u="",searchKeyword:c,searchResultId:_,playMode:h,isMute:m,collectionId:v,collectionName:f,poiId:y,awemeType:P,picCnt:w,playlistId:T="",popupType:S="",enterTab:E,diversifyId:A,tab_name:b,enterMethod:k,isSubOnlyVideo:I,isAutoScroll:R,isReposted:M,currentBackendSourceEventTracking:C,inspiration_session_id:V,token_type:O,inspiration_result_id:F,inspiration_type:x,inspiration_keyword:D,rank:W,is_fullscreen:L}=e;if(!t){var N=(0,i._)({group_id:o,author_id:n,play_mode:this.getPlayModeForTea(h),autoplay_status:d,enter_method:null!=k?k:r,backend_source_event_tracking:null!=C?C:a,search_id:u,search_keyword:c,search_result_id:_,collection_id:v,collection_name:f,poi_id:y,aweme_type:null!=P?P:0,pic_cnt:w,enter_tab:E,diversify_id:A,is_dark:this.isDarkMode?"1":"0",playlist_id:T,popup_type:S,is_sub_only_video:I,is_reposted:+!!M,tab_name:b,inspiration_session_id:V,token_type:O,inspiration_result_id:F,inspiration_type:x,inspiration_keyword:D,rank:W,is_fullscreen:L},this.getExtraParams(),g(e));void 0!==m&&(N.is_mute=m?"1":"0");var G=s?"schedule_video_play_finish":h===p.jl.ThreeColumn||h===p.jl.CreatorTab?"preview_video_play_finish":"video_play_finish";"video_play_finish"===G&&void 0!==R&&(N.is_autoscroll=R?"1":"0"),l.W.event(G,N),this.isFirstPlayEndReported=!0}}playFinishEventForSideCards(e){var{enterMethod:t}=this,{itemId:r,authorId:a,playMode:o,enterMethod:n}=e,s=(0,i._)({group_id:r,author_id:a,play_mode:this.getPlayModeForTea(o),enter_method:null!=n?n:t,is_dark:this.isDarkMode?"1":"0"},g(e));l.W.event("preview_video_play_finish",s)}playTimeEvent(e){var{startPlayTimestamp:t,enterMethod:r,backendSourceEventTracking:a}=this,{itemId:n,authorId:s,isScheduled:c,autoplayStatus:_=0,searchId:h="",searchKeyword:v,searchResultId:y,questionId:P,playMode:w,isMute:T,fromTab:S,hasSubtitle:E,captionsShowType:A,collectionId:b,collectionName:k,poiId:I,awemeType:R,picCnt:M,playlistId:C="",popupType:V="",enterTab:O,diversifyId:F,tab_name:x,enterMethod:D,isSubOnlyVideo:W,isAutoScroll:L,isReposted:N,is_just_watched:G,index_from_just_watched:j,currentBackendSourceEventTracking:U,inspiration_session_id:Q,token_type:B,inspiration_result_id:Y,inspiration_type:H,inspiration_keyword:K,rank:z,is_fullscreen:q}=e,J=Date.now(),Z=this.getFocusTime(J),$=Math.max(J-t,0);if(0!==t){var X=(0,i._)({group_id:n,author_id:s,play_mode:this.getPlayModeForTea(w),autoplay_status:_,duration:$,enter_method:null!=D?D:r,backend_source_event_tracking:null!=U?U:a,search_id:h,search_keyword:v,search_result_id:y,question_id:P,focus_time:Z,from_tab:S,is_dark:this.isDarkMode?"1":"0",collection_id:b,collection_name:k,poi_id:I,aweme_type:null!=R?R:0,pic_cnt:M,playlist_id:C,popup_type:V,enter_tab:O,diversify_id:F,is_sub_only_video:W,is_reposted:+!!N,tab_name:x,inspiration_session_id:Q,token_type:B,inspiration_result_id:Y,inspiration_type:H,inspiration_keyword:K,rank:z,is_fullscreen:q},void 0!==G&&{is_just_watched:G},void 0!==j&&{index_from_just_watched:j},"1"===E?{has_subtitle:E,captions_show_type:A}:{has_subtitle:E},this.getExtraParams(),m.r.getScreenRatio(),g(e),f(e));void 0!==T&&(X.is_mute=T?"1":"0");var ee=(0,d.St)(u.Qi),et=c?"schedule_video_play_time":w===p.jl.ThreeColumn||w===p.jl.CreatorTab?"preview_play_time":"play_time";"play_time"===et&&(X.is_autoscroll=L?"1":"0"),l.W.event(et,(0,o._)((0,i._)({},X),{from_group_id:ee})),this.startPlayTimestamp=0,this.currentCycleStartTimestamp=0}}getExtraParams(){var e,{href:t,search:r}=window.location;return{is_from_webapp:null!=(e=(0,n.parse)(r).is_from_webapp)?e:"0",page_url:t}}reportTTAMAdsVideoPlayEvents(e){var{currentTime:t,ttamAdsTeaParams:r,videoDuration:a,playMode:n,itemId:s}=e,l=(0,_.AG)(n.toString(),s,t);if(l.isVisible){var d=t-l.startTime;d>=1&&!this.ttamAdsParams.is1sViewableImpressionReported&&(h.M7.handlePlayEvent(h.vV.ViewableImpression,(0,o._)((0,i._)({},r),{ad_extra_data:(0,o._)((0,i._)({},r.ad_extra_data),{viewable_length:"1s"})})),this.ttamAdsParams.is1sViewableImpressionReported=!0),d>=2&&!this.ttamAdsParams.is2sViewableImpressionReported&&(h.M7.handlePlayEvent(h.vV.ViewableImpression,(0,o._)((0,i._)({},r),{ad_extra_data:(0,o._)((0,i._)({},r.ad_extra_data),{viewable_length:"2s"})})),this.ttamAdsParams.is2sViewableImpressionReported=!0),d>=6&&!this.ttamAdsParams.is6sViewableImpressionReported&&(h.M7.handlePlayEvent(h.vV.ViewableImpression,(0,o._)((0,i._)({},r),{ad_extra_data:(0,o._)((0,i._)({},r.ad_extra_data),{viewable_length:"6s"})})),this.ttamAdsParams.is6sViewableImpressionReported=!0),d>=15&&!this.ttamAdsParams.is15sViewableImpressionReported&&(h.M7.handlePlayEvent(h.vV.ViewableImpression,(0,o._)((0,i._)({},r),{ad_extra_data:(0,o._)((0,i._)({},r.ad_extra_data),{viewable_length:"15s"})})),this.ttamAdsParams.is15sViewableImpressionReported=!0)}else this.ttamAdsParams.is1sViewableImpressionReported=!1,this.ttamAdsParams.is2sViewableImpressionReported=!1,this.ttamAdsParams.is6sViewableImpressionReported=!1,this.ttamAdsParams.is15sViewableImpressionReported=!1;if(t>=2&&!this.ttamAdsParams.is2sPlayReported&&(h.M7.handlePlayEvent(h.vV.Play2S,r),this.ttamAdsParams.is2sPlayReported=!0),t>=6&&!this.ttamAdsParams.is6sPlayReported&&(h.M7.handlePlayEvent(h.vV.Play6S,r),this.ttamAdsParams.is6sPlayReported=!0),t>=15&&!this.ttamAdsParams.is15sPlayReported&&(h.M7.handlePlayEvent(h.vV.Play15S,r),this.ttamAdsParams.is15sPlayReported=!0),t/a>=.25&&!this.ttamAdsParams.isFirstQuartilePlayReported&&(h.M7.handlePlayEvent(h.vV.FirstQuartile,r),this.ttamAdsParams.isFirstQuartilePlayReported=!0),t/a>=.5&&!this.ttamAdsParams.isMidPointPlayReported&&(h.M7.handlePlayEvent(h.vV.Midpoint,r),this.ttamAdsParams.isMidPointPlayReported=!0),t/a>=.75&&!this.ttamAdsParams.isThirdQuartilePlayReported&&(h.M7.handlePlayEvent(h.vV.ThirdQuartile,r),this.ttamAdsParams.isThirdQuartilePlayReported=!0),t/a>=.99&&this.ttamAdsParams.isThirdQuartilePlayReported){var u=1e3*a;h.M7.handlePlayEvent(h.vV.Over,(0,o._)((0,i._)({},r),{duration:u,video_length:u}));var p=(0,o._)((0,i._)({},r),{duration:u,video_length:u,ad_extra_data:(0,o._)((0,i._)({},r.ad_extra_data),{trigger_from:2,percent:100})});t>=2&&h.M7.handlePlayEvent(h.vV.View2S,p),t>=6&&h.M7.handlePlayEvent(h.vV.View6S,p),t>=15&&h.M7.handlePlayEvent(h.vV.View15S,p),h.M7.handlePlayEvent(h.vV.ViewFirstQuartile,p),h.M7.handlePlayEvent(h.vV.ViewMidpoint,p),h.M7.handlePlayEvent(h.vV.ViewThirdQuartile,p),this.ttamAdsParams=(0,o._)((0,i._)({},w,r),{playOrder:this.ttamAdsParams.playOrder+1,video_length:u})}}constructor(){var e=this;this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1,this.isPause=!1,this.startPlayTimestamp=0,this.currentCycleStartTimestamp=0,this.enterMethod="",this.backendSourceEventTracking="",this.prevReportId="",this.videoFocusTime=0,this.isThreeColumnAuto=!1,this.isVideoDetail=!1,this.isDarkMode=!1,this.ttamAdsParams=(0,i._)({},w),this.videosPlayed=0,this.isFirstPreviewPlayReported=!1,this.setEnterMethod=e=>{this.enterMethod=e},this.setBackendSourceEventTracking=e=>{this.backendSourceEventTracking=e},this.setIsDarkMode=e=>{this.isDarkMode=e},this.setIsThreeColumnAuto=e=>{this.isThreeColumnAuto=e},this.setIsVideoDetail=e=>{this.isVideoDetail=e},this.reset=()=>{if(0!==this.ttamAdsParams.playOrder){var e=Math.max(Date.now()-this.currentCycleStartTimestamp,0),t=this.ttamAdsParams.video_length;h.M7.handlePlayEvent(h.vV.Break,(0,o._)((0,i._)({},this.ttamAdsParams),{duration:e,ad_extra_data:(0,o._)((0,i._)({},this.ttamAdsParams.ad_extra_data),{play_order:this.ttamAdsParams.playOrder})}));var r=(0,o._)((0,i._)({},this.ttamAdsParams),{duration:e,video_length:t,ad_extra_data:(0,o._)((0,i._)({},this.ttamAdsParams.ad_extra_data),{play_order:this.ttamAdsParams.playOrder,trigger_from:1,percent:Math.trunc(e/t*100)})});e/1e3>=2&&h.M7.handlePlayEvent(h.vV.View2S,r),e/1e3>=6&&h.M7.handlePlayEvent(h.vV.View6S,r),e/1e3>=15&&h.M7.handlePlayEvent(h.vV.View15S,r),e/this.ttamAdsParams.video_length>=.25&&h.M7.handlePlayEvent(h.vV.ViewFirstQuartile,r),e/this.ttamAdsParams.video_length>=.5&&h.M7.handlePlayEvent(h.vV.ViewMidpoint,r),e/this.ttamAdsParams.video_length>=.75&&h.M7.handlePlayEvent(h.vV.ViewThirdQuartile,r)}this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1,this.ttamAdsParams=(0,i._)({},w)},this.updateVideoFocusTime=e=>{var{isPause:t,startPlayTimestamp:r}=this,{ttWebappFocusTime:a}=window;!t&&a&&(this.videoFocusTime+=a>r?e-a:e-r)},this.handlePlayTime=e=>{this.playTimeEvent(e)},this.handleTimeUpdate=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{isFirstPlayReported:a,startPlayTimestamp:n,enterMethod:s,backendSourceEventTracking:d}=e,{itemId:u,index:_,authorId:m,isScheduled:v,autoplayStatus:w=0,currentTime:T,searchId:S="",searchKeyword:E,searchResultId:A,questionId:b,playMode:k,isMute:I=!1,fromTab:R,hasSubtitle:M,captionsShowType:C,collectionId:V,collectionName:O,isPaidPartnership:F=!1,poiId:x,awemeType:D,picCnt:W,playlistId:L="",popupType:N="",enterTab:G,diversifyId:j,tab_name:U,enterMethod:Q,isSubOnlyVideo:B,isCopyrightMuted:Y=!1,isPinnedItem:H,isAutoScroll:K=!1,isReposted:z=!1,is_just_watched:q,index_from_just_watched:J,currentBackendSourceEventTracking:Z,render_state:$,resolution:X,is_auto_resolution:ee,readyState:et,player_type:er="",inspiration_session_id:ea,token_type:ei,inspiration_result_id:eo,inspiration_type:en,inspiration_keyword:es,rank:el,is_fullscreen:ed}=t;if(T){var eu=null;if(!a){var ep=(0,i._)({group_id:u,author_id:m,play_mode:e.getPlayModeForTea(k),autoplay_status:w,enter_method:null!=Q?Q:s,backend_source_event_tracking:null!=Z?Z:d,search_id:S,search_keyword:E,search_result_id:A,question_id:b,from_tab:R,is_dark:e.isDarkMode?"1":"0",collection_id:V,collection_name:O,poi_id:x,aweme_type:null!=D?D:0,pic_cnt:W,playlist_id:L,popup_type:N,enter_tab:G,tab_name:U,diversify_id:j,is_sub_only_video:B,is_copyright_muted:Y,is_reposted:+!!z,render_state:$,ready_state:et,video_pos:T,player_type:er,inspiration_session_id:ea,token_type:ei,inspiration_result_id:eo,inspiration_type:en,inspiration_keyword:es,rank:el,is_fullscreen:ed},void 0!==q&&{is_just_watched:q},void 0!==J&&{index_from_just_watched:J},"1"===M?{has_subtitle:M,captions_show_type:C}:{has_subtitle:M},e.getExtraParams(),g(t),y(t),f(t),P(t)),ec=v?"schedule_video_play":k===p.jl.ThreeColumn||k===p.jl.CreatorTab?"preview_video_play":"video_play",e_=r&&e.prevReportId===u;if("video_play"===ec&&(ep.is_mute=I?"1":"0",ep.is_partnership=F?"1":"0",ep.is_autoscroll=K?"1":"0",ep.item_list_index=_,ep.num_video_played=++e.videosPlayed,ep.resolution=X,ep.is_auto_resolution=ee?"1":"0"),"preview_video_play"===ec&&void 0!==H&&(ep.is_pinned=H?"1":"0"),!e_&&(eu=ec,l.W.event(ec,ep),e.reportExploreVideoPlayForFirstPreview(ep),e.isFirstPlayReported=!0,e.prevReportId=u,t.is_ad_event)){e.ttamAdsParams.playOrder=1;var eh,em=(0,o._)((0,i._)({},t),{ad_extra_data:(0,o._)((0,i._)({},t.ad_extra_data),{play_order:e.ttamAdsParams.playOrder}),tag:k&&c.$P[e.getPlayModeForTea(k)]||c.pC.OneColumn});h.M7.handlePlayEvent(h.vV.Play,em),e.ttamAdsParams=(0,o._)((0,i._)({},em,e.ttamAdsParams),{video_length:null!=(eh=t.video_duration)?eh:0})}}if(t.is_ad_event){var ev,eg=(null!=(ev=t.video_duration)?ev:1e8)/1e3;e.reportTTAMAdsVideoPlayEvents({currentTime:T,ttamAdsTeaParams:(0,o._)((0,i._)({},t),{ad_extra_data:(0,o._)((0,i._)({},t.ad_extra_data),{play_order:e.ttamAdsParams.playOrder}),tag:k&&c.$P[e.getPlayModeForTea(k)]||c.pC.OneColumn}),videoDuration:eg,playMode:k,itemId:u})}return 0===n&&e.setStartPlay(),e.isPause=!1,eu}},this.reportExploreVideoPlayForFirstPreview=e=>{!this.isFirstPreviewPlayReported&&e.play_mode===p.Ye.ThreeColumnAuto&&/\/explore/.test(e.page_url)&&(e.enter_method="explore_preview",l.W.event("video_play",e),this.isFirstPreviewPlayReported=!0)},this.handleTimeUpdateForSideCards=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{startPlayTimestamp:a,enterMethod:o}=e,{itemId:n,authorId:s,playMode:d,fromTab:u,enterMethod:p}=t,c=null,_=(0,i._)({group_id:n,author_id:s,play_mode:e.getPlayModeForTea(d),enter_method:null!=p?p:o,from_tab:u,is_dark:e.isDarkMode?"1":"0"},e.getExtraParams(),g(t)),h="preview_video_play";return r&&e.prevReportId===n||(c=h,l.W.event(h,_),e.isFirstPlayReported=!0,e.prevReportId=n),0===a&&e.setStartPlay(),e.isPause=!1,c},this.handleEnded=e=>{this.playFinishEvent(e),this.currentCycleStartTimestamp=Date.now()},this.handleEndedForSideCards=e=>{this.playFinishEventForSideCards(e)},this.handlePause=e=>{var{currentTime:t,duration:r}=e;r!==t&&this.playTimeEvent(e),this.isPause=!0},this.handleWaiting=e=>{var{currentTime:t,duration:r}=e;0!==t&&t!==r&&this.playTimeEvent(e)},this.handleError=e=>{this.playTimeEvent(e)},this.triggerPause=e=>{if(!this.isPause){var{enter_method:t,playMode:r,aweme_type:a=0,pic_cnt:n,currentBackendSourceEventTracking:s,group_id:d}=e,{backendSourceEventTracking:u}=this,p={enter_method:t,backend_source_event_tracking:null!=s?s:u,play_mode:this.getPlayModeForTea(r),aweme_type:a,pic_cnt:n,group_id:d};l.W.event("video_pause",p),0!==this.ttamAdsParams.playOrder&&h.M7.handlePlayEvent(h.vV.Pause,(0,o._)((0,i._)({},this.ttamAdsParams),{ad_extra_data:{play_order:this.ttamAdsParams.playOrder,duration:this.getFocusTime(Date.now())}}))}this.isPause=!0},this.triggerResume=e=>{if(this.isPause){var t=(0,o._)((0,i._)({},e),{play_mode:this.getPlayModeForTea(e.playMode)});l.W.event("video_resume",t),0!==this.ttamAdsParams.playOrder&&h.M7.handlePlayEvent(h.vV.Resume,(0,o._)((0,i._)({},this.ttamAdsParams),{ad_extra_data:{play_order:this.ttamAdsParams.playOrder}}))}},this.triggerPlay=()=>{this.isPause=!1},this.handleAudioPlay=e=>{this.prevReportId=e},this.getFocusTime=e=>{var{startPlayTimestamp:t,videoFocusTime:r}=this,{ttWebappFocusTime:a,ttWebappBlurTime:i}=window,o=0;return a?o=a<t?e-t:r+e-a:i&&(o=i>t?r:0),o}}}T=function(e,t,r,a){var i,o=arguments.length,n=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(o<3?i(n):o>3?i(t,r,n):i(t,r))||n);return o>3&&n&&Object.defineProperty(t,r,n),n}([(0,s.GS)({name:"VideoPlayReport@tiktok/tea-events"})],T)}}]);