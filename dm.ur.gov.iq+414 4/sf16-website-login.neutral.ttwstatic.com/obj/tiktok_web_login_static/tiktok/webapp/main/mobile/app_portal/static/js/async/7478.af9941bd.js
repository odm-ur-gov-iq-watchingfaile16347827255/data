"use strict";(self.webpackChunk_webapp_mobile_app_portal=self.webpackChunk_webapp_mobile_app_portal||[]).push([["7478"],{22398:function(e,n,t){t.d(n,{PW:()=>p,mO:()=>u,ue:()=>v});var i=t(35279),s=t(85370),a=t(33041),o=t(22573),r=t(61714),l=t(17132),d=t(23480),h={currentIndex:0,indexInit:!0};function _(){var e={swiper:null,setSwiper(n){e.swiper=n},_handleSlideChangeStart:o.Z,_handleSlideChangeEnd:o.Z,_handleTransitionEnd:o.Z,_handleSlideChange:o.Z,_handleSliderMove:o.Z,_handleActiveIndexChange:o.Z,handleSlideChangeStart(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];e._handleSlideChangeStart(...t)},handleSlideChangeEnd(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];e._handleSlideChangeEnd(...t)},handleTransitionEnd(){e._handleTransitionEnd()},handleSlideChange(){e._handleSlideChange()},handleSliderMove(){e._handleSliderMove()},handleActiveIndexChange(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];e._handleActiveIndexChange(...t)},bindHandleSlideChangeStart(n){e._handleSlideChangeStart=n},bindHandleSlideChangeEnd(n){e._handleSlideChangeEnd=n},bindHandleTransitionEnd(n){e._handleTransitionEnd=n},bindHandleSlideChange(n){e._handleSlideChange=n},bindHandleSliderMove(n){e._handleSliderMove=n},bindHandleActiveIndexChange(n){e._handleActiveIndexChange=n},setCurrentIndex:o.Z,state:h};return e}var v=(0,l.T)("SwiperStaticContext@tiktok/webapp-mobile")(_()),u=(0,l.T)("SwiperDynamicContext@tiktok/webapp-mobile")(h),p=e=>{var[n,t]=(0,d.E)(h),o=(0,r.useRef)(_()),l=(0,r.useRef)(!0);return l.current&&(o.current.setCurrentIndex=e=>t((0,s._)((0,i._)({},n),{currentIndex:e,indexInit:!1})),l.current=!1),(0,a.jsx)(v.Provider,{value:o.current,children:(0,a.jsx)(u.Provider,{value:n,children:e.children})})}},23480:function(e,n,t){t.d(n,{E:()=>a});var i=t(61354),s=t(61714);function a(e){var n=(0,s.useRef)(e),[t,a]=(0,s.useState)(e);return[t,(0,s.useCallback)(e=>{var t;t="function"==typeof e?e(n.current):e,(0,i.Z)(n.current,t)||a(t),n.current=t},[])]}},11613:function(e,n,t){t.d(n,{wk:()=>G,XD:()=>H,nb:()=>j,zG:()=>A,Cb:()=>V});var i,s,a,o,r=t(35279),l=t(85370),d=t(47901),h=t(84457),_=t(61714),v=t(25449),u=t(74878),p=t(46588),c=t(70367),k=t(63710),g=t(84795),S=t(43507),C=t(95131),m=t(41412),w=t(45368),b=t(6241),y=t(22398),f=t(33041),M=t(1570),E=t(59837),P=t(24898),x=t(92377);(i=a||(a={}))[i.Reported=1]="Reported",i[i.Dislike=2]="Dislike",i[i.General=3]="General",i[i.Photosensitive=4]="Photosensitive",(s=o||(o={})).GeneralSensitive="general",s.PhotoSensitive="photosensitive",s.PhotoSensitiveDenied="photosensitive_denied",s.M3AgeRestricted="m3_age_restricted";var I={general:"masklayer_general_title",photosensitive:"photosensitive_settings_title",photosensitive_denied:"photosensitive_masklayer_removed",m3_age_restricted:"cc_webapp_age_video_details_title"},B={general:["masklayer_general_body"],photosensitive:["photosensitive_masklayer_body1","photosensitive_masklayer_body2"],photosensitive_denied:["photosensitive_masklayer_removed_body1","photosensitive_masklayer_removed_body2"],m3_age_restricted:["cc_webapp_age_video_details_body"]},W={general:"masklayer_general_skip",photosensitive:"photosensitive_masklayer_watch",photosensitive_denied:""},Z={general:"masklayer_general_watch",photosensitive:"photosensitive_masklayer_skipall",photosensitive_denied:""},L={general:(0,f.jsx)(E.Z,{width:36,height:36,fill:"rgba(255, 255, 255, .75)"}),photosensitive:(0,f.jsx)(P.Z,{width:32,height:32,fill:"#fff"}),photosensitive_denied:(0,f.jsx)(x.Z,{width:48,height:48,fill:"#0BE09B"}),m3_age_restricted:(0,f.jsx)(M.Z,{fontSize:72,color:"rgba(255, 255, 255, 0.34)"})},R=()=>{var e,n,{photoSensitiveVideosSetting:t,loginStatePhotoSensitiveVideosSetting:i}=(0,h.mp)(v.P,{selector:e=>({photoSensitiveVideosSetting:e.photoSensitiveVideosSetting,loginStatePhotoSensitiveVideosSetting:e.loginStatePhotoSensitiveVideosSetting}),dependencies:[]}),{user:s}=null!=(e=(0,u.L)(()=>["user"],[]))?e:{};return s?void 0===i?null!=(n=null==s?void 0:s.photoSensitiveVideosSetting)?n:0:i:null!=t?t:0},A=e=>{var n,t,i=(0,p.Q)(),{user:s}=null!=(t=(0,u.L)(()=>["user"],[]))?t:{},a=R(),o=(0,h.mp)(v.P,{selector:e=>e.hasClosedVideoMask,dependencies:[]}),r=null==(n=e.item)?void 0:n.isContentClassified,l=(0,d.u)();return(0,_.useMemo)(()=>{var n,{item:t}=e,{maskType:d,author:h}=(0,c.m7)(t),_=s&&(null==s?void 0:s.uniqueId)===h;if(!(r||!o&&(3===d||4===d&&2!==a&&!_||4===d&&0===a&&_)))return{showVideoMask:!1};var v={};r?(n="m3_age_restricted",v={backgroundColor:l.colors.ConstBGInverse}):n=3===d?"general":1===a?"photosensitive_denied":"photosensitive";var u=i(I[n]),p=i(B[n][0]),k=L[n],g=i(W[n]),S=i(Z[n]);return{showVideoMask:!0,videoMaskType:n,videoMaskTitle:u,videoMaskDesc:p,icon:k,upperBtnText:g,lowerBtnText:S,maskStyle:v}},[e,s,r,o,a,i,l.colors.ConstBGInverse])},G=e=>{var n,t,{item:i,list:s=[],onClose:a}=e,{length:o}=s,d=(0,p.Q)(),c=(0,_.useContext)(y.ue),k=(0,_.useContext)(y.mO),g=(0,h.qj)(v.P),{user:S}=null!=(n=(0,u.L)(()=>["user"],[]))?n:{},{currentIndex:C}=k,b=null!=(t=s[C])?t:"",f=A({item:i}),{videoMaskType:M}=f,E=(0,_.useCallback)(()=>{"photosensitive"===M&&g.setSkipPhotoSensitive({skip:!1,hasLogin:!!S}),g.setHasClosedMask(!0),m.W.handleMaskLayerClickWatch({scenario:M,group_id:b})},[b,g,M,S]),P=(0,_.useCallback)(()=>{var e,n;"photosensitive"===M&&g.setSkipPhotoSensitive({skip:!0,hasLogin:!!S}),m.W.handleMaskLayerClickSkip({scenario:M,group_id:b}),w.h.destroy(),w.h.open({content:d("photosensitive_skepped_toast"),duration:3}),C<o-1?null==(e=c.swiper)||e.slideNext():C>0?null==(n=c.swiper)||n.slidePrev():null==a||a()},[C,b,o,a,c.swiper,d,g,M,S]),x=(0,_.useCallback)(()=>{"photosensitive"===M?E():P()},[P,E,M]),I=(0,_.useCallback)(()=>{"photosensitive"===M?P():E()},[M,P,E]);return(0,_.useEffect)(()=>{g.setHasClosedMask(!1)},[C]),(0,l._)((0,r._)({},f),{handleUpperBtnClick:x,handleLowerBtnClick:I,handleSkipVideo:P,groupId:b})},H=e=>{var{itemOriginalMute:n=!1,itemCopyrightMute:t=!1,playMode:i=0}=e,s=(0,k.Gt)()||n,a=(0,h.mp)(b._),o=(0,_.useMemo)(()=>a.showPlayBtn||2===i,[a.showPlayBtn,i]),r=(0,_.useMemo)(()=>!t&&(s||a.showUnMuteBtn),[t,s,a.showUnMuteBtn]);return{muted:s,showUnMuteBtn:r,showPlayBtn:o}},V=()=>{var[{bottomModalCtaShowing:e},n]=(0,h.b7)(b._),{mobileDefaultMute:t,forcePause:i}=(0,k.GC)(),s=(0,_.useRef)(e),{isSmartPlayer:a}=(0,g.Zp)(),o=(0,k.pu)();(0,_.useEffect)(()=>{a||(s.current&&!e?(n.setShowPlayBtn(!1),n.setShowUnmuteBtn(!1),o.setMobileDefaultMute(!1),o.setForcePause(!1),o.setCanRetry(!1)):!s.current&&e?(n.setShowUnmuteBtn(!1),n.setShowPlayBtn(!1),o.setForcePause(!0)):i?o.setMobileDefaultMute(!1):n.setShowUnmuteBtn(t),s.current=e)},[e,t,n,i])},j=()=>{var e=(0,k.pu)();(0,_.useEffect)(()=>{(0,S.St)(C.vN)&&e.setCanRetry(!0)},[])}},41412:function(e,n,t){t.d(n,{W:()=>s});var i=t(22554),s={handleRemovePhotosensitiveStatus:e=>{i.W.sendEvent("tns_remove_photosensitive_status",{status:e})},handleShowMaskLayer:e=>{i.W.sendEvent("tns_show_mask_layer",e)},handleShowPhotosensitiveRemoved:e=>{i.W.sendEvent("tns_show_photosensitive_removed",e)},handleMaskLayerClickSkip:e=>{i.W.sendEvent("tns_mask_layer_click_skip",e)},handleMaskLayerClickWatch:e=>{i.W.sendEvent("tns_mask_layer_click_watch",e)},handleCCMaskShow:e=>{i.W.sendEvent("cc_mask_show",e)},handleClickLogInCCMask:e=>{i.W.sendEvent("click_log_in_cc_mask",e)}}}}]);