"use strict";(self.webpackChunk_webapp_mobile_app_portal=self.webpackChunk_webapp_mobile_app_portal||[]).push([["1743"],{7722:function(e,o,t){t.d(o,{aU:()=>C,hV:()=>R,_B:()=>k});var n=t(31678),r=t(61714),l=t(17674),i=t(74878),u=t(62684),a=t(68933),d=t(69031),c=t(35279),s=t(91099),v=t(63147),_=t(12725),p=t(70367),f=t(77272),h=t(24099),m=[_.q.Trending,_.q.Explore,_.q.PhotoVideo,_.q.Video,_.q.SearchVideo,_.q.SearchUser,_.q.GeneralSearch],g=[_.q.Trending],V=t(43507),y=t(62185),b=t(95602),w=t(85275),S=t(81769);function C(e,o,t,_){(0,l.nV)(),function(e,o,t,_){var V,{pathname:y}=(0,b.TH)(),{abTestVersion:C}=null!=(V=(0,i.L)(()=>["abTestVersion"],[]))?V:{},k=(0,u.HT)();(0,l.k0)(()=>{var o,t,n;return{page_name:e,enter_from:e,ui_type:_,vidab:null!=(t=null==C?void 0:C.versionName)?t:"",seo_vidab:(null!=(n=null==k?void 0:k.vidList)?n:[]).join(","),[w.Zw]:(0,a.yF)()||null==(o=(0,S.bX)(w.V9))?void 0:o[w.Zw]}},[e,y]);var R=(0,l.mn)({eParams:o});(0,r.useEffect)(()=>{(null==o?void 0:o.notReady)||R()},[R]);var I=(0,n.fz)(d.nF);(0,r.useEffect)(()=>{var e;I.context({previous_pid:I.previousPid(),custom_referrer:null==(e=document)?void 0:e.referrer})},[I]),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,n.fz)(d.nF);(0,r.useEffect)(()=>{var t;o.emitEvent("uv_with_context",{count:1},(0,c._)({device_memory:(null==(t=(0,s.b5)())?void 0:t.toString())||"unknown"},e))},[o])}(),(0,v.q$)({pid:null!=t?t:e}),function(e){var o=function(){var{user:e,region:o}=(0,p.m7)((0,i.L)(()=>["user","region"],[])),{forceLoginSpecialRegions:t}=(0,p.m7)((0,f.h)(()=>["forceLoginSpecialRegions"],[]));return(0,r.useMemo)(()=>!!(!e&&(null==t?void 0:t.includes(o))),[t,o,e])}(),{isMobile:t=!1}=(0,p.m7)((0,f.h)(()=>["isMobile"],[])),n=t?g:m,l=!!e&&(null==n?void 0:n.includes(e));(0,r.useEffect)(()=>{o&&l&&window&&(window.location.href="/login?redirect_url=".concat((0,h.AY)()))},[e,o,l])}(e)}(e,o,t,_)}function k(e){var{isPlayerMode:o,reportInfo:t,disabled:n=!1}=e,{videoCount:l,setCommonReportInfo:i}=(0,y.C)(),{group_id:u="",author_id:a=""}=(0,p.m7)(t),d=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{(u||a)&&!n&&(o&&!d.current?(i({videoId:u,authorId:a,videoCountPlusOne:!0}),d.current=!0):i({videoId:u,authorId:a}))},[a,u,i,n]),{videoCount:l,setCommonReportInfo:i}}function R(){return(0,V.St)("fyp_enter_method")}},53107:function(e,o,t){t.d(o,{Ah:()=>y,GQ:()=>w,Rm:()=>b,Zc:()=>C,bA:()=>k,mg:()=>V});var n=t(35279),r=t(85370),l=t(48538),i=t(7522),u=t(12160),a=t(54238),d=t(41331),c=t(29851),s=t(49173),v=t(64937),_=t(68933),p=t(33023),f=t(63406),h="w_g_vv",m="w_g_fyp_vv",g={prevVideo:null,currentVideo:null,playType:c.gH.Hover,globalVvCount:0,fypVvCount:0,justWatchedVideo:null,predictedPreloadConfig:{},defaultResolution:void 0,multiInstanceActualResolutions:{},autoResolution:!0},V=()=>{var e,o,t=(0,n._)({},g);if((0,_.yF)())return t;try{t.globalVvCount=Number(null!=(e=localStorage.getItem(h))?e:"0"),t.fypVvCount=Number(null!=(o=localStorage.getItem(m))?o:"0")}catch(e){console.warn("getLocalStorage failed for key: webapp_vv_count")}return t},y=(0,a.K)("videoPlayerAtom@tiktok/webapp-atoms",V()),{useServiceState:b,useServiceDispatchers:w,useAtomService:S,getStaticApi:C}=(0,i.T)(y,(e,o)=>({setAutoResolution(e){o(y,o=>(0,r._)((0,n._)({},o),{autoResolution:e}))},setDefaultResolution(e){o(y,o=>(0,r._)((0,n._)({},o),{defaultResolution:e,autoResolution:"auto"===e}))},setDefaultResolutionAndUpdateLocalStorage(e){this.setDefaultResolution(e);try{localStorage.setItem("resolution_auto",e)}catch(e){console.warn("setLocalStorage failed for key: resolution")}},setMultiInstanceActualResolution(e,t){o(y,o=>{var l=(0,n._)({},o.multiInstanceActualResolutions);l[e]=t;var i=[...o.recentVideoIndexes||[]];return i.includes(e)||(i=[e,...i]),i.length>4&&(i=i.slice(0,4)),l=Object.fromEntries(Object.entries(l).filter(e=>{var[o]=e;return i.includes(Number(o))})),(0,r._)((0,n._)({},o),{multiInstanceActualResolutions:l,recentVideoIndexes:i})})},updateVideo(e){var{needResetReport:t=!0,currentVideo:{index:i},teaParams:{isThreeColumnAuto:a=!1,isVideoDetail:d=!1,enterMethod:c="",backendSourceEventTracking:h=""}={}}=e,m=e=>{(null==e?void 0:e.id)&&(null==e?void 0:e.mode)!==void 0&&((null==e?void 0:e.mode)===s.jl.OneColumn||(null==e?void 0:e.mode)===s.jl.BrowserMode||(null==e?void 0:e.mode)===s.jl.ImmersivePlayer||(null==e?void 0:e.mode)===s.jl.VideoDetail)&&o(y,o=>(0,r._)((0,n._)({},o),{justWatchedVideo:e}))},g=u.n.getInstance(v.ec);g.setIsThreeColumnAuto(a),g.setEnterMethod(c),g.setBackendSourceEventTracking(h),g.setIsVideoDetail(d),!(0,_.yF)()&&window.videoChangedCallback&&window.videoChangedCallback(i),t&&g.reset(),(0,l.unstable_batchedUpdates)(()=>{o(y,o=>(0,r._)((0,n._)({},o),{prevVideo:o.currentVideo,currentVideo:e.currentVideo,playType:e.playType})),o(p.Og,o=>(0,r._)((0,n._)({},o),{playProgress:e.playProgress})),o(f.b6,e=>(0,r._)((0,n._)({},e),{isPlayerError:!1})),m(e.currentVideo)})},updateVideoFocusTime(e){u.n.getInstance(v.ec).updateVideoFocusTime(e.blurTime)},updateGlobalVVCount(t){var{globalVvCount:l=0,fypVvCount:i=0}=e(y),u=l;l<=1e6&&t!==s.jl.ThreeColumn&&(u=l+1,(0,d.D$)(h,String(u)),o(y,e=>(0,r._)((0,n._)({},e),{globalVvCount:u}))),i<=1e6&&t===s.jl.OneColumn&&((0,d.D$)(m,String(i+1)),o(y,e=>(0,r._)((0,n._)({},e),{fypVvCount:i+1})))},updatePredictedPreloadConfig(e){o(y,o=>(0,r._)((0,n._)({},o),{predictedPreloadConfig:e}))},getStaticPlayerState:()=>e(y)})),k=()=>b(e=>{var o;return null==(o=e.currentVideo)?void 0:o.id})},29851:function(e,o,t){t.d(o,{CN:()=>s,FN:()=>c,a5:()=>d,gH:()=>v,yY:()=>_});var n,r,l,i,u=t(35279),a=t(22554),d=((n={}).Click="click",n.Draw="draw",n),c=((r={}).General="general_search",r.SearchResult="search_result",r.SearchUser="search_user",r.SearchSug="search_sug",r),s=((l={}).OthersPhoto="others_photo",l.Cover="live_cover",l.Cell="live_cell",l.SugPhoto="enrich_sug_photo",l),v=((i={}).AutoMatic="automatic",i.Hover="hover",i),_={handleLiveShow:e=>{a.W.event("livesdk_live_show",e)},handleLiveRecPlay:e=>{a.W.event("livesdk_rec_live_play",(0,u._)({action_type:"click"},e))},handleLiveWindowDuration:e=>{a.W.event("livesdk_live_window_duration_v2",e)}}}}]);