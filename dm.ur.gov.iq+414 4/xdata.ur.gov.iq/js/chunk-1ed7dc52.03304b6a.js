(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ed7dc52"],{"00ee":function(t,a,e){"use strict";var o=e("b622"),s=o("toStringTag"),n={};n[s]="z",t.exports="[object z]"===String(n)},"0d26":function(t,a,e){"use strict";var o=e("e330"),s=Error,n=o("".replace),r=function(t){return String(new s(t).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,l=i.test(r);t.exports=function(t,a){if(l&&"string"==typeof t&&!s.prepareStackTrace)while(a--)t=n(t,i,"");return t}},1540:function(t,a,e){"use strict";e("fd64")},1787:function(t,a,e){"use strict";var o=e("861d");t.exports=function(t){return o(t)||null===t}},"3bbe":function(t,a,e){"use strict";var o=e("1787"),s=String,n=TypeError;t.exports=function(t){if(o(t))return t;throw new n("Can't set "+s(t)+" as a prototype")}},"4fce":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("section",{staticClass:"dashboard-counts section-padding"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[t.show?t._e():a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[t.show?t._e():a("h2",{staticClass:"text-center"},[t._v(" لاتوجد خدمات للعرض ")])])])])]),a("div",{staticClass:"box animate__animated animate__fadeInUp"},[a("div",{staticClass:"box-head"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6 col-12"},[a("h5",{staticClass:"animate__animated animate__backInRight"},[t._v(" البحث في خدمة : "),a("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.ServiceName))])])]),t._m(0)])]),a("form",{on:{submit:function(a){return a.preventDefault(),t.sendCode.apply(null,arguments)}}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label text-nowrap"},[t._v(" "+t._s(t.columns.searchable_data2[0]["label"])+" : ")]),a("div",{staticClass:"col-sm-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.companyCode,expression:"companyCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"رمز الشركة",required:""},domProps:{value:t.companyCode},on:{input:function(a){a.target.composing||(t.companyCode=a.target.value)}}})])]),t._m(1)])]),a("div",[t.companyInfo?a("table",{attrs:{border:"1"}},[t._m(2),a("tbody",[t._l(t.companyInfoNames,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.label))]),a("td",[t._v(t._s(t.companyInfo[e.ColumnName]||"N/A"))])])})),a("button",{staticClass:"btn btn-primary m-3",on:{click:function(a){t.showModal=!0}}},[t._v(" اضافة معلومات الحمولة ")])],2)]):t._e()]),t.showModal?a("div",{staticClass:"modal fade show d-block",attrs:{tabindex:"-1"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("إدخال بيانات")]),a("button",{staticClass:"close btn btn-close",attrs:{type:"button"},on:{click:t.closeModal}})]),a("div",{staticClass:"modal-body"},[a("form",[t._l(t.formFields,(function(e){return a("div",{key:e.id,staticClass:"form-group"},[a("label",{attrs:{for:e.ColumnName}},[t._v(" "+t._s(e.label)+" "),e.ColumnRequired?a("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]),"dropdownlist"===e.ColumnType?a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.ColumnName],expression:"formData[field.ColumnName]"}],staticClass:"form-control",on:{change:function(a){var o=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.formData,e.ColumnName,a.target.multiple?o:o[0])}}},t._l(e.ContentList,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0):"checkbox"===e.ColumnType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.ColumnName],expression:"formData[field.ColumnName]"}],staticClass:"form-control",attrs:{id:e.ColumnName,required:e.ColumnRequired,type:"checkbox"},domProps:{checked:Array.isArray(t.formData[e.ColumnName])?t._i(t.formData[e.ColumnName],null)>-1:t.formData[e.ColumnName]},on:{change:function(a){var o=t.formData[e.ColumnName],s=a.target,n=!!s.checked;if(Array.isArray(o)){var r=null,i=t._i(o,r);s.checked?i<0&&t.$set(t.formData,e.ColumnName,o.concat([r])):i>-1&&t.$set(t.formData,e.ColumnName,o.slice(0,i).concat(o.slice(i+1)))}else t.$set(t.formData,e.ColumnName,n)}}}):"radio"===e.ColumnType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.ColumnName],expression:"formData[field.ColumnName]"}],staticClass:"form-control",attrs:{id:e.ColumnName,required:e.ColumnRequired,type:"radio"},domProps:{checked:t._q(t.formData[e.ColumnName],null)},on:{change:function(a){return t.$set(t.formData,e.ColumnName,null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.ColumnName],expression:"formData[field.ColumnName]"}],staticClass:"form-control",attrs:{id:e.ColumnName,required:e.ColumnRequired,type:e.ColumnType},domProps:{value:t.formData[e.ColumnName]},on:{input:function(a){a.target.composing||t.$set(t.formData,e.ColumnName,a.target.value)}}})])})),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"fileUpload"}},[t._v("تحميل ملف (اختياري)")]),a("input",{staticClass:"form-control-file",attrs:{type:"file",id:"fileUpload"},on:{change:t.handleFileUpload}}),t.file?a("p",{staticClass:"text-success mt-2"},[t._v(" تم تحديد الملف: "+t._s(t.file.name)+" ")]):t._e()])],2)]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.closeModal}},[t._v(" إغلاق ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submitForm}},[t._v(" حفظ ")])])])])]):t._e(),t.showModal?a("div",{staticClass:"modal-backdrop fade show"}):t._e()])])},s=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"col-sm-6 col-12"},[a("h5",{staticClass:"ministry-align animate__animated animate__backInLeft pull-left"},[a("small",{staticClass:"text-danger font-weight-bold"},[t._v("الحكومة العراقية")])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"form-group row mt-4"},[a("div",{staticClass:"row d-grid gap-2 col-md-2 col-12 offset-md-5 align-self-center"},[a("button",{staticClass:"btn btn-success btn-block",attrs:{type:"submit"}},[t._v(" البحث ")])])])},function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",{attrs:{colspan:"2"}},[t._v("معلومات الشركة")])])])}],n=(e("2c66"),e("249d"),e("40e9"),e("907a"),e("986a"),e("1d02"),e("3c5d"),e("6ce5"),e("2834"),e("4ea1"),e("b7ef"),e("88a7"),e("271a"),e("5494"),e("d7a6")),r=e("bc3a"),i=e.n(r),l=e("3d20"),c=e.n(l);e("41cb");const d="https://xdata.ur.gov.iq/api/";var m={name:"certCheck",data(){return{show:!0,ServiceName:null,companyCode:null,columns:[],companyInfo:null,ndcid:null,secondNDCid:null,companyInfoNames:null,showModal:!1,formFields:null,file:null,formData:{}}},computed:{...Object(n["mapGetters"])(["token"])},methods:{closeModal(){this.showModal=!1},handleFileUpload(t){this.file=t.target.files[0]},async sendCode(){let t=this.$loading.show({loader:"dots",transition:"fade",color:"#DC3545"});var a={searchdata:[{hash_code:this.companyCode}]};try{const e=await i.a.post(d+"border_company/ssearch",a,{headers:{Authorization:"Bearer "+this.token}});200==e.status?(t.hide(),this.companyInfo=e.data.SearchData[0],this.companyInfoNames=e.data.ViewableData,this.ndcid=e.data.SearchData[0].NDCid,this.companyCode=null):201==e.status&&(t.hide(),c.a.fire({icon:"info",title:e.data.error,showConfirmButton:!0}))}catch(e){t.hide(),e.response?c.a.fire({icon:"error",title:"خطأ في الخادم",text:`خطأ: ${e.response.status} - ${e.response.statusText}`,showConfirmButton:!0}):e.request?c.a.fire({icon:"error",title:"تعذر الوصول إلى الخادم",text:"تحقق من اتصالك بالإنترنت أو حاول لاحقًا.",showConfirmButton:!0}):c.a.fire({icon:"error",title:"حدث خطأ غير متوقع",text:e.message,showConfirmButton:!0})}},async getColumns(){let t=this.$loading.show({loader:"dots",transition:"fade",color:"#DC3545"});try{const a=await i.a.get(d+"border_company/serchable_column",{headers:{Authorization:"Bearer "+this.token}});200==a.status?(t.hide(),this.columns=a.data,this.formFields=a.data.QrcodeProperties2.ColumnsNameAdd,console.log("response.data.ServiceName"),console.log(a.data.ServiceName),this.ServiceName=a.data.ServiceName):201==a.status&&(t.hide(),c.a.fire({icon:"info",title:a.data.error,showConfirmButton:!0}))}catch(a){console.log(a)}},async getpdf(){let t=this.$loading.show({loader:"dots",transition:"fade",color:"#DC3545"});const a=new FormData;a.append("NDCid2",this.ndcid),a.append("attach1",this.file);try{const e=await i.a.post(d+"border_company/add_attachments/"+this.secondNDCid,a,{headers:{Authorization:"Bearer "+this.token}});if(200==e.status){t.hide();const a=e.data.pdf_base64,o=atob(a),s=new Uint8Array([...o].map(t=>t.charCodeAt(0))),n=new Blob([s],{type:"application/pdf"});let r=URL.createObjectURL(n);c.a.fire({icon:"success",title:"تم تحميل الفايل بنجاح",showConfirmButton:!0}).then(()=>{window.open(r,"_blank"),location.reload()})}}catch(e){t.hide(),console.log(e)}},async submitForm(){let t=this.$loading.show({loader:"dots",transition:"fade",color:"#DC3545"});const a={ColumnsNameAdd:[this.formData],NDCid:this.ndcid};try{const e=await i.a.post(d+"border_company/add-data-service",a,{headers:{Authorization:"Bearer "+this.token}});console.log(e.data),200==e.status?(t.hide(),this.secondNDCid=e.data.NDCid,this.getpdf()):(e.status,t.hide(),c.a.fire({icon:"info",title:e.data.message,showConfirmButton:!0}))}catch(e){this.showModal=!1,t.hide(),console.log(e)}}},mounted(){this.getColumns()}},u=m,f=(e("1540"),e("0c7c")),p=Object(f["a"])(u,o,s,!1,null,"84fa099c",null);a["default"]=p.exports},"577e":function(t,a,e){"use strict";var o=e("f5df"),s=String;t.exports=function(t){if("Symbol"===o(t))throw new TypeError("Cannot convert a Symbol value to a string");return s(t)}},7156:function(t,a,e){"use strict";var o=e("1626"),s=e("861d"),n=e("d2bb");t.exports=function(t,a,e){var r,i;return n&&o(r=a.constructor)&&r!==e&&s(i=r.prototype)&&i!==e.prototype&&n(t,i),t}},7282:function(t,a,e){"use strict";var o=e("e330"),s=e("59ed");t.exports=function(t,a,e){try{return o(s(Object.getOwnPropertyDescriptor(t,a)[e]))}catch(n){}}},d2bb:function(t,a,e){"use strict";var o=e("7282"),s=e("861d"),n=e("1d80"),r=e("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,a=!1,e={};try{t=o(Object.prototype,"__proto__","set"),t(e,[]),a=e instanceof Array}catch(i){}return function(e,o){return n(e),r(o),s(e)?(a?t(e,o):e.__proto__=o,e):e}}():void 0)},e391:function(t,a,e){"use strict";var o=e("577e");t.exports=function(t,a){return void 0===t?arguments.length<2?"":a:o(t)}},f5df:function(t,a,e){"use strict";var o=e("00ee"),s=e("1626"),n=e("c6b6"),r=e("b622"),i=r("toStringTag"),l=Object,c="Arguments"===n(function(){return arguments}()),d=function(t,a){try{return t[a]}catch(e){}};t.exports=o?n:function(t){var a,e,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=d(a=l(t),i))?e:c?n(a):"Object"===(o=n(a))&&s(a.callee)?"Arguments":o}},fd64:function(t,a,e){}}]);